{"version":3,"sources":["file:///Users/longbow/node_modules/antd/lib/modal/useModal/index.js"],"names":["_cjsLoader","_req","__cjsMetaURL","_req0","_req1","_req2","_req3","_req4","_req5","_req6","url","define","exports","require","module","__filename","__dirname","_interopRequireWildcard","_interopRequireDefault","Object","defineProperty","value","useModal","_toConsumableArray2","_slicedToArray2","React","_usePatchElement3","_confirm","_HookModal","uuid","ElementsHolder","memo","forwardRef","_props","ref","_usePatchElement","_usePatchElement2","elements","patchElement","useImperativeHandle","createElement","Fragment","holderRef","useRef","_React$useState","useState","_React$useState2","actionQueue","setActionQueue","useEffect","length","cloneQueue","forEach","action","getConfirmFunc","useCallback","withFunc","hookConfirm","config","_a","modalRef","createRef","closeFunc","modal","key","concat","afterClose","current","destroy","destroyAction","prev","update","newConfig","updateAction","fns","useMemo","info","withInfo","success","withSuccess","error","withError","warning","withWarn","confirm","withConfirm","_cjsExports","___esModule","__esModule","_default","default"],"mappings":"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","sourcesContent":["import _cjsLoader from 'cce:/internal/ml/cjs-loader.mjs';\nimport { __cjsMetaURL as _req} from '@babel/runtime/helpers/interopRequireWildcard';\nimport { __cjsMetaURL as _req0} from '@babel/runtime/helpers/interopRequireDefault';\nimport { __cjsMetaURL as _req1} from '@babel/runtime/helpers/toConsumableArray';\nimport { __cjsMetaURL as _req2} from '@babel/runtime/helpers/slicedToArray';\nimport { __cjsMetaURL as _req3} from 'react';\nimport { __cjsMetaURL as _req4} from '../../_util/hooks/usePatchElement';\nimport { __cjsMetaURL as _req5} from '../confirm';\nimport { __cjsMetaURL as _req6} from './HookModal';\nlet _cjsExports;\nlet ___esModule;\nlet _default;\nconst __cjsMetaURL = import.meta.url;\n_cjsLoader.define(__cjsMetaURL, function (exports, require, module, __filename, __dirname) {\n// #region ORIGINAL CODE\n\n\n \"use strict\";\n\n var _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\")[\"default\"];\n var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\")[\"default\"];\n Object.defineProperty(exports, \"__esModule\", {\n   value: true\n });\n exports[\"default\"] = useModal;\n var _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\n var _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n var React = _interopRequireWildcard(require(\"react\"));\n var _usePatchElement3 = _interopRequireDefault(require(\"../../_util/hooks/usePatchElement\"));\n var _confirm = require(\"../confirm\");\n var _HookModal = _interopRequireDefault(require(\"./HookModal\"));\n var uuid = 0;\n var ElementsHolder = /*#__PURE__*/React.memo( /*#__PURE__*/React.forwardRef(function (_props, ref) {\n   var _usePatchElement = (0, _usePatchElement3[\"default\"])(),\n     _usePatchElement2 = (0, _slicedToArray2[\"default\"])(_usePatchElement, 2),\n     elements = _usePatchElement2[0],\n     patchElement = _usePatchElement2[1];\n   React.useImperativeHandle(ref, function () {\n     return {\n       patchElement: patchElement\n     };\n   }, []);\n   // eslint-disable-next-line react/jsx-no-useless-fragment\n   return /*#__PURE__*/React.createElement(React.Fragment, null, elements);\n }));\n function useModal() {\n   var holderRef = React.useRef(null);\n   // ========================== Effect ==========================\n   var _React$useState = React.useState([]),\n     _React$useState2 = (0, _slicedToArray2[\"default\"])(_React$useState, 2),\n     actionQueue = _React$useState2[0],\n     setActionQueue = _React$useState2[1];\n   React.useEffect(function () {\n     if (actionQueue.length) {\n       var cloneQueue = (0, _toConsumableArray2[\"default\"])(actionQueue);\n       cloneQueue.forEach(function (action) {\n         action();\n       });\n       setActionQueue([]);\n     }\n   }, [actionQueue]);\n   // =========================== Hook ===========================\n   var getConfirmFunc = React.useCallback(function (withFunc) {\n     return function hookConfirm(config) {\n       var _a;\n       uuid += 1;\n       var modalRef = /*#__PURE__*/React.createRef();\n       var closeFunc;\n       var modal = /*#__PURE__*/React.createElement(_HookModal[\"default\"], {\n         key: \"modal-\".concat(uuid),\n         config: withFunc(config),\n         ref: modalRef,\n         afterClose: function afterClose() {\n           closeFunc === null || closeFunc === void 0 ? void 0 : closeFunc();\n         }\n       });\n       closeFunc = (_a = holderRef.current) === null || _a === void 0 ? void 0 : _a.patchElement(modal);\n       return {\n         destroy: function destroy() {\n           function destroyAction() {\n             var _a;\n             (_a = modalRef.current) === null || _a === void 0 ? void 0 : _a.destroy();\n           }\n           if (modalRef.current) {\n             destroyAction();\n           } else {\n             setActionQueue(function (prev) {\n               return [].concat((0, _toConsumableArray2[\"default\"])(prev), [destroyAction]);\n             });\n           }\n         },\n         update: function update(newConfig) {\n           function updateAction() {\n             var _a;\n             (_a = modalRef.current) === null || _a === void 0 ? void 0 : _a.update(newConfig);\n           }\n           if (modalRef.current) {\n             updateAction();\n           } else {\n             setActionQueue(function (prev) {\n               return [].concat((0, _toConsumableArray2[\"default\"])(prev), [updateAction]);\n             });\n           }\n         }\n       };\n     };\n   }, []);\n   var fns = React.useMemo(function () {\n     return {\n       info: getConfirmFunc(_confirm.withInfo),\n       success: getConfirmFunc(_confirm.withSuccess),\n       error: getConfirmFunc(_confirm.withError),\n       warning: getConfirmFunc(_confirm.withWarn),\n       confirm: getConfirmFunc(_confirm.withConfirm)\n     };\n   }, []);\n   // eslint-disable-next-line react/jsx-key\n   return [fns, /*#__PURE__*/React.createElement(ElementsHolder, {\n     ref: holderRef\n   })];\n }\n\n// #endregion ORIGINAL CODE\n\n_cjsExports = module.exports;\n___esModule = module.exports.__esModule;\n_default = module.exports.default;\n\n}, () => ({\n  '@babel/runtime/helpers/interopRequireWildcard': _req,\n  '@babel/runtime/helpers/interopRequireDefault': _req0,\n  '@babel/runtime/helpers/toConsumableArray': _req1,\n  '@babel/runtime/helpers/slicedToArray': _req2,\n  'react': _req3,\n  '../../_util/hooks/usePatchElement': _req4,\n  '../confirm': _req5,\n  './HookModal': _req6,\n}));\nexport { _cjsExports as default };\nexport { __cjsMetaURL }\n"]}