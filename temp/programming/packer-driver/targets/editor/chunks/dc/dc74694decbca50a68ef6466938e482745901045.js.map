{"version":3,"sources":["file:///Users/longbow/node_modules/rc-cascader/lib/hooks/useSearchOptions.js"],"names":["_cjsLoader","_req","__cjsMetaURL","_req0","_req1","_req2","_req3","_req4","url","define","exports","require","module","__filename","__dirname","_interopRequireDefault","_typeof","Object","defineProperty","value","default","SEARCH_MARK","_defineProperty2","_objectSpread3","_toConsumableArray2","React","_interopRequireWildcard","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","cache","has","get","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","defaultFilter","search","options","_ref","label","some","opt","String","toLowerCase","includes","defaultRender","inputValue","path","prefixCls","fieldNames","map","join","_default","config","changeOnSelect","_config$filter","filter","_config$render","render","_config$limit","limit","sort","useMemo","filteredOptions","dig","list","pathOptions","forEach","option","length","connectedPathOptions","concat","children","_objectSpread2","push","a","b","slice","_cjsExports","___esModule","_default0","_SEARCH_MARK"],"mappings":";;;;;;;;;AAAOA,MAAAA,U;;AACkBC,MAAAA,I,6CAAhBC,Y;;AACgBC,MAAAA,K,8BAAhBD,Y;;AACgBE,MAAAA,K,sCAAhBF,Y;;AACgBG,MAAAA,K,oCAAhBH,Y;;AACgBI,MAAAA,K,yCAAhBJ,Y;;AACgBK,MAAAA,K,UAAhBL,Y;;;8BAKHA,Y,GAAe,cAAYM,G;;AACjCR,MAAAA,UAAU,CAACS,MAAX,CAAkBP,YAAlB,EAAgC,UAAUQ,OAAV,EAAmBC,OAAnB,EAA4BC,MAA5B,EAAoCC,UAApC,EAAgDC,SAAhD,EAA2D;AAC3F;AAGC;;AAEA,YAAIC,sBAAsB,GAAGJ,OAAO,CAAC,8CAAD,CAApC;;AAEA,YAAIK,OAAO,GAAGL,OAAO,CAAC,+BAAD,CAArB;;AAEAM,QAAAA,MAAM,CAACC,cAAP,CAAsBR,OAAtB,EAA+B,YAA/B,EAA6C;AAC3CS,UAAAA,KAAK,EAAE;AADoC,SAA7C;AAGAT,QAAAA,OAAO,CAACU,OAAR,GAAkBV,OAAO,CAACW,WAAR,GAAsB,KAAK,CAA7C;;AAEA,YAAIC,gBAAgB,GAAGP,sBAAsB,CAACJ,OAAO,CAAC,uCAAD,CAAR,CAA7C;;AAEA,YAAIY,cAAc,GAAGR,sBAAsB,CAACJ,OAAO,CAAC,sCAAD,CAAR,CAA3C;;AAEA,YAAIa,mBAAmB,GAAGT,sBAAsB,CAACJ,OAAO,CAAC,0CAAD,CAAR,CAAhD;;AAEA,YAAIc,KAAK,GAAGC,uBAAuB,CAACf,OAAO,CAAC,OAAD,CAAR,CAAnC;;AAEA,iBAASgB,wBAAT,CAAkCC,WAAlC,EAA+C;AAAE,cAAI,OAAOC,OAAP,KAAmB,UAAvB,EAAmC,OAAO,IAAP;AAAa,cAAIC,iBAAiB,GAAG,IAAID,OAAJ,EAAxB;AAAuC,cAAIE,gBAAgB,GAAG,IAAIF,OAAJ,EAAvB;AAAsC,iBAAO,CAACF,wBAAwB,GAAG,SAASA,wBAAT,CAAkCC,WAAlC,EAA+C;AAAE,mBAAOA,WAAW,GAAGG,gBAAH,GAAsBD,iBAAxC;AAA4D,WAAzI,EAA2IF,WAA3I,CAAP;AAAiK;;AAE/U,iBAASF,uBAAT,CAAiCM,GAAjC,EAAsCJ,WAAtC,EAAmD;AAAE,cAAI,CAACA,WAAD,IAAgBI,GAAhB,IAAuBA,GAAG,CAACC,UAA/B,EAA2C;AAAE,mBAAOD,GAAP;AAAa;;AAAC,cAAIA,GAAG,KAAK,IAAR,IAAgBhB,OAAO,CAACgB,GAAD,CAAP,KAAiB,QAAjB,IAA6B,OAAOA,GAAP,KAAe,UAAhE,EAA4E;AAAE,mBAAO;AAAEZ,cAAAA,OAAO,EAAEY;AAAX,aAAP;AAA0B;;AAAC,cAAIE,KAAK,GAAGP,wBAAwB,CAACC,WAAD,CAApC;;AAAmD,cAAIM,KAAK,IAAIA,KAAK,CAACC,GAAN,CAAUH,GAAV,CAAb,EAA6B;AAAE,mBAAOE,KAAK,CAACE,GAAN,CAAUJ,GAAV,CAAP;AAAwB;;AAAC,cAAIK,MAAM,GAAG,EAAb;AAAiB,cAAIC,qBAAqB,GAAGrB,MAAM,CAACC,cAAP,IAAyBD,MAAM,CAACsB,wBAA5D;;AAAsF,eAAK,IAAIC,GAAT,IAAgBR,GAAhB,EAAqB;AAAE,gBAAIQ,GAAG,KAAK,SAAR,IAAqBvB,MAAM,CAACwB,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCX,GAArC,EAA0CQ,GAA1C,CAAzB,EAAyE;AAAE,kBAAII,IAAI,GAAGN,qBAAqB,GAAGrB,MAAM,CAACsB,wBAAP,CAAgCP,GAAhC,EAAqCQ,GAArC,CAAH,GAA+C,IAA/E;;AAAqF,kBAAII,IAAI,KAAKA,IAAI,CAACR,GAAL,IAAYQ,IAAI,CAACC,GAAtB,CAAR,EAAoC;AAAE5B,gBAAAA,MAAM,CAACC,cAAP,CAAsBmB,MAAtB,EAA8BG,GAA9B,EAAmCI,IAAnC;AAA2C,eAAjF,MAAuF;AAAEP,gBAAAA,MAAM,CAACG,GAAD,CAAN,GAAcR,GAAG,CAACQ,GAAD,CAAjB;AAAyB;AAAE;AAAE;;AAACH,UAAAA,MAAM,CAACjB,OAAP,GAAiBY,GAAjB;;AAAsB,cAAIE,KAAJ,EAAW;AAAEA,YAAAA,KAAK,CAACW,GAAN,CAAUb,GAAV,EAAeK,MAAf;AAAyB;;AAAC,iBAAOA,MAAP;AAAgB;;AAEtyB,YAAIhB,WAAW,GAAG,6BAAlB;AACAX,QAAAA,OAAO,CAACW,WAAR,GAAsBA,WAAtB;;AAEA,YAAIyB,aAAa,GAAG,SAASA,aAAT,CAAuBC,MAAvB,EAA+BC,OAA/B,EAAwCC,IAAxC,EAA8C;AAChE,cAAIC,KAAK,GAAGD,IAAI,CAACC,KAAjB;AACA,iBAAOF,OAAO,CAACG,IAAR,CAAa,UAAUC,GAAV,EAAe;AACjC,mBAAOC,MAAM,CAACD,GAAG,CAACF,KAAD,CAAJ,CAAN,CAAmBI,WAAnB,GAAiCC,QAAjC,CAA0CR,MAAM,CAACO,WAAP,EAA1C,CAAP;AACD,WAFM,CAAP;AAGD,SALD;;AAOA,YAAIE,aAAa,GAAG,SAASA,aAAT,CAAuBC,UAAvB,EAAmCC,IAAnC,EAAyCC,SAAzC,EAAoDC,UAApD,EAAgE;AAClF,iBAAOF,IAAI,CAACG,GAAL,CAAS,UAAUT,GAAV,EAAe;AAC7B,mBAAOA,GAAG,CAACQ,UAAU,CAACV,KAAZ,CAAV;AACD,WAFM,EAEJY,IAFI,CAEC,KAFD,CAAP;AAGD,SAJD;;AAMA,YAAIC,QAAQ,GAAG,SAASA,QAAT,CAAkBhB,MAAlB,EAA0BC,OAA1B,EAAmCY,UAAnC,EAA+CD,SAA/C,EAA0DK,MAA1D,EAAkEC,cAAlE,EAAkF;AAC/F,cAAIC,cAAc,GAAGF,MAAM,CAACG,MAA5B;AAAA,cACIA,MAAM,GAAGD,cAAc,KAAK,KAAK,CAAxB,GAA4BpB,aAA5B,GAA4CoB,cADzD;AAAA,cAEIE,cAAc,GAAGJ,MAAM,CAACK,MAF5B;AAAA,cAGIA,MAAM,GAAGD,cAAc,KAAK,KAAK,CAAxB,GAA4BZ,aAA5B,GAA4CY,cAHzD;AAAA,cAIIE,aAAa,GAAGN,MAAM,CAACO,KAJ3B;AAAA,cAKIA,KAAK,GAAGD,aAAa,KAAK,KAAK,CAAvB,GAA2B,EAA3B,GAAgCA,aAL5C;AAAA,cAMIE,IAAI,GAAGR,MAAM,CAACQ,IANlB;AAOA,iBAAO/C,KAAK,CAACgD,OAAN,CAAc,YAAY;AAC/B,gBAAIC,eAAe,GAAG,EAAtB;;AAEA,gBAAI,CAAC3B,MAAL,EAAa;AACX,qBAAO,EAAP;AACD;;AAED,qBAAS4B,GAAT,CAAaC,IAAb,EAAmBC,WAAnB,EAAgC;AAC9BD,cAAAA,IAAI,CAACE,OAAL,CAAa,UAAUC,MAAV,EAAkB;AAC7B;AACA,oBAAI,CAACP,IAAD,IAASD,KAAK,GAAG,CAAjB,IAAsBG,eAAe,CAACM,MAAhB,IAA0BT,KAApD,EAA2D;AACzD;AACD;;AAED,oBAAIU,oBAAoB,GAAG,GAAGC,MAAH,CAAU,CAAC,GAAG1D,mBAAmB,CAACJ,OAAxB,EAAiCyD,WAAjC,CAAV,EAAyD,CAACE,MAAD,CAAzD,CAA3B;AACA,oBAAII,QAAQ,GAAGJ,MAAM,CAACnB,UAAU,CAACuB,QAAZ,CAArB,CAP6B,CAOe;;AAE5C,qBAAK;AACL,iBAACA,QAAD,IAAaA,QAAQ,CAACH,MAAT,KAAoB,CAAjC,IAAsC;AACtCf,gBAAAA,cAFA,EAEgB;AACd,sBAAIE,MAAM,CAACpB,MAAD,EAASkC,oBAAT,EAA+B;AACvC/B,oBAAAA,KAAK,EAAEU,UAAU,CAACV;AADqB,mBAA/B,CAAV,EAEI;AACF,wBAAIkC,cAAJ;;AAEAV,oBAAAA,eAAe,CAACW,IAAhB,CAAqB,CAAC,GAAG9D,cAAc,CAACH,OAAnB,EAA4B,CAAC,GAAGG,cAAc,CAACH,OAAnB,EAA4B,EAA5B,EAAgC2D,MAAhC,CAA5B,EAAqE,EAArE,GAA0EK,cAAc,GAAG,EAAjB,EAAqB,CAAC,GAAG9D,gBAAgB,CAACF,OAArB,EAA8BgE,cAA9B,EAA8CxB,UAAU,CAACV,KAAzD,EAAgEmB,MAAM,CAACtB,MAAD,EAASkC,oBAAT,EAA+BtB,SAA/B,EAA0CC,UAA1C,CAAtE,CAArB,EAAmJ,CAAC,GAAGtC,gBAAgB,CAACF,OAArB,EAA8BgE,cAA9B,EAA8C/D,WAA9C,EAA2D4D,oBAA3D,CAAnJ,EAAqOG,cAA/S,EAArB;AACD;AACF;;AAED,oBAAID,QAAJ,EAAc;AACZR,kBAAAA,GAAG,CAACI,MAAM,CAACnB,UAAU,CAACuB,QAAZ,CAAP,EAA8BF,oBAA9B,CAAH;AACD;AACF,eAxBD;AAyBD;;AAEDN,YAAAA,GAAG,CAAC3B,OAAD,EAAU,EAAV,CAAH,CAnC+B,CAmCb;;AAElB,gBAAIwB,IAAJ,EAAU;AACRE,cAAAA,eAAe,CAACF,IAAhB,CAAqB,UAAUc,CAAV,EAAaC,CAAb,EAAgB;AACnC,uBAAOf,IAAI,CAACc,CAAC,CAACjE,WAAD,CAAF,EAAiBkE,CAAC,CAAClE,WAAD,CAAlB,EAAiC0B,MAAjC,EAAyCa,UAAzC,CAAX;AACD,eAFD;AAGD;;AAED,mBAAOW,KAAK,GAAG,CAAR,GAAYG,eAAe,CAACc,KAAhB,CAAsB,CAAtB,EAAyBjB,KAAzB,CAAZ,GAA8CG,eAArD;AACD,WA5CM,EA4CJ,CAAC3B,MAAD,EAASC,OAAT,EAAkBY,UAAlB,EAA8BD,SAA9B,EAAyCU,MAAzC,EAAiDJ,cAAjD,EAAiEE,MAAjE,EAAyEK,IAAzE,EAA+ED,KAA/E,CA5CI,CAAP;AA6CD,SArDD;;AAuDA7D,QAAAA,OAAO,CAACU,OAAR,GAAkB2C,QAAlB,CAlG0F,CAoG3F;;AAEA,2BAAA0B,WAAW,GAAG7E,MAAM,CAACF,OAArB;;AACAgF,QAAAA,WAAW,GAAG9E,MAAM,CAACF,OAAP,CAAeuB,UAA7B;AACA0D,QAAAA,SAAS,GAAG/E,MAAM,CAACF,OAAP,CAAeU,OAA3B;AACAwE,QAAAA,YAAY,GAAGhF,MAAM,CAACF,OAAP,CAAeW,WAA9B;AAEC,OA3GD,EA2GG,OAAO;AACR,wDAAgDpB,IADxC;AAER,yCAAiCE,KAFzB;AAGR,iDAAyCC,KAHjC;AAIR,gDAAwCC,KAJhC;AAKR,oDAA4CC,KALpC;AAMR,iBAASC;AAND,OAAP,CA3GH","sourcesContent":["import _cjsLoader from 'cce:/internal/ml/cjs-loader.mjs';\nimport { __cjsMetaURL as _req} from '@babel/runtime/helpers/interopRequireDefault';\nimport { __cjsMetaURL as _req0} from '@babel/runtime/helpers/typeof';\nimport { __cjsMetaURL as _req1} from '@babel/runtime/helpers/defineProperty';\nimport { __cjsMetaURL as _req2} from '@babel/runtime/helpers/objectSpread2';\nimport { __cjsMetaURL as _req3} from '@babel/runtime/helpers/toConsumableArray';\nimport { __cjsMetaURL as _req4} from 'react';\nlet _cjsExports;\nlet ___esModule;\nlet _default0;\nlet _SEARCH_MARK;\nconst __cjsMetaURL = import.meta.url;\n_cjsLoader.define(__cjsMetaURL, function (exports, require, module, __filename, __dirname) {\n// #region ORIGINAL CODE\n\n\n \"use strict\";\n\n var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\n var _typeof = require(\"@babel/runtime/helpers/typeof\");\n\n Object.defineProperty(exports, \"__esModule\", {\n   value: true\n });\n exports.default = exports.SEARCH_MARK = void 0;\n\n var _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\n var _objectSpread3 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread2\"));\n\n var _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\n\n var React = _interopRequireWildcard(require(\"react\"));\n\n function _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\n function _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\n var SEARCH_MARK = '__rc_cascader_search_mark__';\n exports.SEARCH_MARK = SEARCH_MARK;\n\n var defaultFilter = function defaultFilter(search, options, _ref) {\n   var label = _ref.label;\n   return options.some(function (opt) {\n     return String(opt[label]).toLowerCase().includes(search.toLowerCase());\n   });\n };\n\n var defaultRender = function defaultRender(inputValue, path, prefixCls, fieldNames) {\n   return path.map(function (opt) {\n     return opt[fieldNames.label];\n   }).join(' / ');\n };\n\n var _default = function _default(search, options, fieldNames, prefixCls, config, changeOnSelect) {\n   var _config$filter = config.filter,\n       filter = _config$filter === void 0 ? defaultFilter : _config$filter,\n       _config$render = config.render,\n       render = _config$render === void 0 ? defaultRender : _config$render,\n       _config$limit = config.limit,\n       limit = _config$limit === void 0 ? 50 : _config$limit,\n       sort = config.sort;\n   return React.useMemo(function () {\n     var filteredOptions = [];\n\n     if (!search) {\n       return [];\n     }\n\n     function dig(list, pathOptions) {\n       list.forEach(function (option) {\n         // Perf saving when `sort` is disabled and `limit` is provided\n         if (!sort && limit > 0 && filteredOptions.length >= limit) {\n           return;\n         }\n\n         var connectedPathOptions = [].concat((0, _toConsumableArray2.default)(pathOptions), [option]);\n         var children = option[fieldNames.children]; // If current option is filterable\n\n         if ( // If is leaf option\n         !children || children.length === 0 || // If is changeOnSelect\n         changeOnSelect) {\n           if (filter(search, connectedPathOptions, {\n             label: fieldNames.label\n           })) {\n             var _objectSpread2;\n\n             filteredOptions.push((0, _objectSpread3.default)((0, _objectSpread3.default)({}, option), {}, (_objectSpread2 = {}, (0, _defineProperty2.default)(_objectSpread2, fieldNames.label, render(search, connectedPathOptions, prefixCls, fieldNames)), (0, _defineProperty2.default)(_objectSpread2, SEARCH_MARK, connectedPathOptions), _objectSpread2)));\n           }\n         }\n\n         if (children) {\n           dig(option[fieldNames.children], connectedPathOptions);\n         }\n       });\n     }\n\n     dig(options, []); // Do sort\n\n     if (sort) {\n       filteredOptions.sort(function (a, b) {\n         return sort(a[SEARCH_MARK], b[SEARCH_MARK], search, fieldNames);\n       });\n     }\n\n     return limit > 0 ? filteredOptions.slice(0, limit) : filteredOptions;\n   }, [search, options, fieldNames, prefixCls, render, changeOnSelect, filter, sort, limit]);\n };\n\n exports.default = _default;\n\n// #endregion ORIGINAL CODE\n\n_cjsExports = module.exports;\n___esModule = module.exports.__esModule;\n_default0 = module.exports.default;\n_SEARCH_MARK = module.exports.SEARCH_MARK;\n\n}, () => ({\n  '@babel/runtime/helpers/interopRequireDefault': _req,\n  '@babel/runtime/helpers/typeof': _req0,\n  '@babel/runtime/helpers/defineProperty': _req1,\n  '@babel/runtime/helpers/objectSpread2': _req2,\n  '@babel/runtime/helpers/toConsumableArray': _req3,\n  'react': _req4,\n}));\nexport { _cjsExports as default };\nexport { __cjsMetaURL }\n"]}