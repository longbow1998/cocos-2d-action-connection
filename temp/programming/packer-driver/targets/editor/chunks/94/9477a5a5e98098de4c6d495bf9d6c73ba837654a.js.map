{"version":3,"sources":["file:///Users/longbow/node_modules/rc-input-number/lib/hooks/useCursor.js"],"names":["_cjsLoader","_req","__cjsMetaURL","_req0","_req1","url","define","exports","require","module","__filename","__dirname","_interopRequireDefault","Object","defineProperty","value","default","useCursor","_react","_warning","input","focused","selectionRef","useRef","recordCursor","start","selectionStart","end","selectionEnd","beforeTxt","substring","afterTxt","current","e","restoreCursor","_selectionRef$current","startPos","length","endsWith","startsWith","beforeLastChar","newIndex","indexOf","setSelectionRange","concat","message","_cjsExports","___esModule","__esModule","_default"],"mappings":"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","sourcesContent":["import _cjsLoader from 'cce:/internal/ml/cjs-loader.mjs';\nimport { __cjsMetaURL as _req} from '@babel/runtime/helpers/interopRequireDefault';\nimport { __cjsMetaURL as _req0} from 'react';\nimport { __cjsMetaURL as _req1} from 'rc-util/lib/warning';\nlet _cjsExports;\nlet ___esModule;\nlet _default;\nconst __cjsMetaURL = import.meta.url;\n_cjsLoader.define(__cjsMetaURL, function (exports, require, module, __filename, __dirname) {\n// #region ORIGINAL CODE\n\n\n \"use strict\";\n\n var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n Object.defineProperty(exports, \"__esModule\", {\n   value: true\n });\n exports.default = useCursor;\n var _react = require(\"react\");\n var _warning = _interopRequireDefault(require(\"rc-util/lib/warning\"));\n /**\n  * Keep input cursor in the correct position if possible.\n  * Is this necessary since we have `formatter` which may mass the content?\n  */\n function useCursor(input, focused) {\n   var selectionRef = (0, _react.useRef)(null);\n   function recordCursor() {\n     // Record position\n     try {\n       var start = input.selectionStart,\n         end = input.selectionEnd,\n         value = input.value;\n       var beforeTxt = value.substring(0, start);\n       var afterTxt = value.substring(end);\n       selectionRef.current = {\n         start: start,\n         end: end,\n         value: value,\n         beforeTxt: beforeTxt,\n         afterTxt: afterTxt\n       };\n     } catch (e) {\n       // Fix error in Chrome:\n       // Failed to read the 'selectionStart' property from 'HTMLInputElement'\n       // http://stackoverflow.com/q/21177489/3040605\n     }\n   }\n   /**\n    * Restore logic:\n    *  1. back string same\n    *  2. start string same\n    */\n   function restoreCursor() {\n     if (input && selectionRef.current && focused) {\n       try {\n         var value = input.value;\n         var _selectionRef$current = selectionRef.current,\n           beforeTxt = _selectionRef$current.beforeTxt,\n           afterTxt = _selectionRef$current.afterTxt,\n           start = _selectionRef$current.start;\n         var startPos = value.length;\n         if (value.endsWith(afterTxt)) {\n           startPos = value.length - selectionRef.current.afterTxt.length;\n         } else if (value.startsWith(beforeTxt)) {\n           startPos = beforeTxt.length;\n         } else {\n           var beforeLastChar = beforeTxt[start - 1];\n           var newIndex = value.indexOf(beforeLastChar, start - 1);\n           if (newIndex !== -1) {\n             startPos = newIndex + 1;\n           }\n         }\n         input.setSelectionRange(startPos, startPos);\n       } catch (e) {\n         (0, _warning.default)(false, \"Something warning of cursor restore. Please fire issue about this: \".concat(e.message));\n       }\n     }\n   }\n   return [recordCursor, restoreCursor];\n }\n\n// #endregion ORIGINAL CODE\n\n_cjsExports = module.exports;\n___esModule = module.exports.__esModule;\n_default = module.exports.default;\n\n}, () => ({\n  '@babel/runtime/helpers/interopRequireDefault': _req,\n  'react': _req0,\n  'rc-util/lib/warning': _req1,\n}));\nexport { _cjsExports as default };\nexport { __cjsMetaURL }\n"]}