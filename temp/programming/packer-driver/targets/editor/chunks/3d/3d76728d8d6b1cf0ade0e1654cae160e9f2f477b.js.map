{"version":3,"sources":["file:///Users/longbow/node_modules/rc-upload/lib/traverseFileTree.js"],"names":["_cjsLoader","__cjsMetaURL","url","define","exports","require","module","__filename","__dirname","Object","defineProperty","value","default","loopFiles","item","callback","dirReader","createReader","fileList","sequence","readEntries","entries","entryList","Array","prototype","slice","apply","concat","isFinished","length","traverseFileTree","files","isAccepted","_traverseFileTree","path","isFile","file","fullPath","webkitRelativePath","defineProperties","writable","replace","isDirectory","forEach","entryItem","name","webkitGetAsEntry","_default","_cjsExports","___esModule","__esModule","_default0"],"mappings":"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","sourcesContent":["import _cjsLoader from 'cce:/internal/ml/cjs-loader.mjs';\nlet _cjsExports;\nlet ___esModule;\nlet _default0;\nconst __cjsMetaURL = import.meta.url;\n_cjsLoader.define(__cjsMetaURL, function (exports, require, module, __filename, __dirname) {\n// #region ORIGINAL CODE\n\n\n \"use strict\";\n\n Object.defineProperty(exports, \"__esModule\", {\n   value: true\n });\n exports.default = void 0;\n\n function loopFiles(item, callback) {\n   var dirReader = item.createReader();\n   var fileList = [];\n\n   function sequence() {\n     dirReader.readEntries(function (entries) {\n       var entryList = Array.prototype.slice.apply(entries);\n       fileList = fileList.concat(entryList); // Check if all the file has been viewed\n\n       var isFinished = !entryList.length;\n\n       if (isFinished) {\n         callback(fileList);\n       } else {\n         sequence();\n       }\n     });\n   }\n\n   sequence();\n }\n\n var traverseFileTree = function traverseFileTree(files, callback, isAccepted) {\n   // eslint-disable-next-line @typescript-eslint/naming-convention\n   var _traverseFileTree = function _traverseFileTree(item, path) {\n     // eslint-disable-next-line no-param-reassign\n     item.path = path || '';\n\n     if (item.isFile) {\n       item.file(function (file) {\n         if (isAccepted(file)) {\n           // https://github.com/ant-design/ant-design/issues/16426\n           if (item.fullPath && !file.webkitRelativePath) {\n             Object.defineProperties(file, {\n               webkitRelativePath: {\n                 writable: true\n               }\n             }); // eslint-disable-next-line no-param-reassign\n\n             file.webkitRelativePath = item.fullPath.replace(/^\\//, '');\n             Object.defineProperties(file, {\n               webkitRelativePath: {\n                 writable: false\n               }\n             });\n           }\n\n           callback([file]);\n         }\n       });\n     } else if (item.isDirectory) {\n       loopFiles(item, function (entries) {\n         entries.forEach(function (entryItem) {\n           _traverseFileTree(entryItem, \"\".concat(path).concat(item.name, \"/\"));\n         });\n       });\n     }\n   };\n\n   files.forEach(function (file) {\n     _traverseFileTree(file.webkitGetAsEntry());\n   });\n };\n\n var _default = traverseFileTree;\n exports.default = _default;\n\n// #endregion ORIGINAL CODE\n\n_cjsExports = module.exports;\n___esModule = module.exports.__esModule;\n_default0 = module.exports.default;\n\n}, {});\nexport { _cjsExports as default };\nexport { __cjsMetaURL }\n"]}