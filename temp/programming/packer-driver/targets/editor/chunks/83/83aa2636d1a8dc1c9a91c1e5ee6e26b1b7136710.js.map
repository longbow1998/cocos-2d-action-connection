{"version":3,"sources":["file:///Users/longbow/node_modules/rc-mentions/lib/util.js"],"names":["_cjsLoader","__cjsMetaURL","url","define","exports","require","module","__filename","__dirname","Object","defineProperty","value","filterOption","getBeforeSelectionText","getLastMeasureIndex","replaceWithMeasure","setInputSelection","validateSearch","input","selectionStart","slice","text","prefix","reduce","lastMatch","prefixStr","lastIndex","lastIndexOf","location","lower","char","toLowerCase","reduceText","targetText","split","firstChar","restText","targetTextLen","length","i","measureConfig","measureLocation","beforeMeasureText","concat","connectedStartText","selectionLocation","setSelectionRange","blur","focus","props","indexOf","_ref","_ref$value","lowerCase","_cjsExports","___esModule","__esModule","_filterOption","_getBeforeSelectionText","_getLastMeasureIndex","_replaceWithMeasure","_setInputSelection","_validateSearch"],"mappings":"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","sourcesContent":["import _cjsLoader from 'cce:/internal/ml/cjs-loader.mjs';\nlet _cjsExports;\nlet ___esModule;\nlet _filterOption;\nlet _getBeforeSelectionText;\nlet _getLastMeasureIndex;\nlet _replaceWithMeasure;\nlet _setInputSelection;\nlet _validateSearch;\nconst __cjsMetaURL = import.meta.url;\n_cjsLoader.define(__cjsMetaURL, function (exports, require, module, __filename, __dirname) {\n// #region ORIGINAL CODE\n\n\n \"use strict\";\n\n Object.defineProperty(exports, \"__esModule\", {\n   value: true\n });\n exports.filterOption = filterOption;\n exports.getBeforeSelectionText = getBeforeSelectionText;\n exports.getLastMeasureIndex = getLastMeasureIndex;\n exports.replaceWithMeasure = replaceWithMeasure;\n exports.setInputSelection = setInputSelection;\n exports.validateSearch = validateSearch;\n /**\n  * Cut input selection into 2 part and return text before selection start\n  */\n function getBeforeSelectionText(input) {\n   var selectionStart = input.selectionStart;\n   return input.value.slice(0, selectionStart);\n }\n /**\n  * Find the last match prefix index\n  */\n function getLastMeasureIndex(text, prefix) {\n   return prefix.reduce(function (lastMatch, prefixStr) {\n     var lastIndex = text.lastIndexOf(prefixStr);\n     if (lastIndex > lastMatch.location) {\n       return {\n         location: lastIndex,\n         prefix: prefixStr\n       };\n     }\n     return lastMatch;\n   }, {\n     location: -1,\n     prefix: ''\n   });\n }\n function lower(char) {\n   return (char || '').toLowerCase();\n }\n function reduceText(text, targetText, split) {\n   var firstChar = text[0];\n   if (!firstChar || firstChar === split) {\n     return text;\n   }\n   // Reuse rest text as it can\n   var restText = text;\n   var targetTextLen = targetText.length;\n   for (var i = 0; i < targetTextLen; i += 1) {\n     if (lower(restText[i]) !== lower(targetText[i])) {\n       restText = restText.slice(i);\n       break;\n     } else if (i === targetTextLen - 1) {\n       restText = restText.slice(targetTextLen);\n     }\n   }\n   return restText;\n }\n /**\n  * Paint targetText into current text:\n  *  text: little@litest\n  *  targetText: light\n  *  => little @light test\n  */\n function replaceWithMeasure(text, measureConfig) {\n   var measureLocation = measureConfig.measureLocation,\n     prefix = measureConfig.prefix,\n     targetText = measureConfig.targetText,\n     selectionStart = measureConfig.selectionStart,\n     split = measureConfig.split;\n   // Before text will append one space if have other text\n   var beforeMeasureText = text.slice(0, measureLocation);\n   if (beforeMeasureText[beforeMeasureText.length - split.length] === split) {\n     beforeMeasureText = beforeMeasureText.slice(0, beforeMeasureText.length - split.length);\n   }\n   if (beforeMeasureText) {\n     beforeMeasureText = \"\".concat(beforeMeasureText).concat(split);\n   }\n   // Cut duplicate string with current targetText\n   var restText = reduceText(text.slice(selectionStart), targetText.slice(selectionStart - measureLocation - prefix.length), split);\n   if (restText.slice(0, split.length) === split) {\n     restText = restText.slice(split.length);\n   }\n   var connectedStartText = \"\".concat(beforeMeasureText).concat(prefix).concat(targetText).concat(split);\n   return {\n     text: \"\".concat(connectedStartText).concat(restText),\n     selectionLocation: connectedStartText.length\n   };\n }\n function setInputSelection(input, location) {\n   input.setSelectionRange(location, location);\n   /**\n    * Reset caret into view.\n    * Since this function always called by user control, it's safe to focus element.\n    */\n   input.blur();\n   input.focus();\n }\n function validateSearch(text, props) {\n   var split = props.split;\n   return !split || text.indexOf(split) === -1;\n }\n function filterOption(input, _ref) {\n   var _ref$value = _ref.value,\n     value = _ref$value === void 0 ? '' : _ref$value;\n   var lowerCase = input.toLowerCase();\n   return value.toLowerCase().indexOf(lowerCase) !== -1;\n }\n\n// #endregion ORIGINAL CODE\n\n_cjsExports = module.exports;\n___esModule = module.exports.__esModule;\n_filterOption = module.exports.filterOption;\n_getBeforeSelectionText = module.exports.getBeforeSelectionText;\n_getLastMeasureIndex = module.exports.getLastMeasureIndex;\n_replaceWithMeasure = module.exports.replaceWithMeasure;\n_setInputSelection = module.exports.setInputSelection;\n_validateSearch = module.exports.validateSearch;\n\n}, {});\nexport { _cjsExports as default };\nexport { __cjsMetaURL }\n"]}