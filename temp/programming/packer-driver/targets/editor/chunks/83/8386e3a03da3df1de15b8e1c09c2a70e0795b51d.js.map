{"version":3,"sources":["file:///Users/longbow/node_modules/rc-table/lib/ContextSelector/index.js"],"names":["_cjsLoader","_req","__cjsMetaURL","_req0","_req1","_req2","_req3","_req4","_req5","url","define","exports","require","module","__filename","__dirname","_interopRequireDefault","_typeof","Object","defineProperty","value","createContext","useContextSelector","_slicedToArray2","React","_interopRequireWildcard","_useLayoutEffect","_useEvent","_shallowequal","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","Context","Provider","_ref","children","valueRef","useRef","current","_React$useState","useState","getValue","listeners","Set","_React$useState2","context","forEach","listener","createElement","holder","selector","eventSelector","useContext","_ref2","_React$useState3","_React$useState4","setValue","trigger","nextValue","prev","selectedValue","add","delete","_cjsExports","___esModule","_createContext","_useContextSelector"],"mappings":"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","sourcesContent":["import _cjsLoader from 'cce:/internal/ml/cjs-loader.mjs';\nimport { __cjsMetaURL as _req} from '@babel/runtime/helpers/interopRequireDefault';\nimport { __cjsMetaURL as _req0} from '@babel/runtime/helpers/typeof';\nimport { __cjsMetaURL as _req1} from '@babel/runtime/helpers/slicedToArray';\nimport { __cjsMetaURL as _req2} from 'react';\nimport { __cjsMetaURL as _req3} from 'rc-util/lib/hooks/useLayoutEffect';\nimport { __cjsMetaURL as _req4} from 'rc-util/lib/hooks/useEvent';\nimport { __cjsMetaURL as _req5} from 'shallowequal';\nlet _cjsExports;\nlet ___esModule;\nlet _createContext;\nlet _useContextSelector;\nconst __cjsMetaURL = import.meta.url;\n_cjsLoader.define(__cjsMetaURL, function (exports, require, module, __filename, __dirname) {\n// #region ORIGINAL CODE\n\n\n \"use strict\";\n\n var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\n var _typeof = require(\"@babel/runtime/helpers/typeof\");\n\n Object.defineProperty(exports, \"__esModule\", {\n   value: true\n });\n exports.createContext = createContext;\n exports.useContextSelector = useContextSelector;\n\n var _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\n var React = _interopRequireWildcard(require(\"react\"));\n\n var _useLayoutEffect = _interopRequireDefault(require(\"rc-util/lib/hooks/useLayoutEffect\"));\n\n var _useEvent = _interopRequireDefault(require(\"rc-util/lib/hooks/useEvent\"));\n\n var _shallowequal = _interopRequireDefault(require(\"shallowequal\"));\n\n function _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\n function _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\n function createContext() {\n   var Context = /*#__PURE__*/React.createContext(null);\n\n   var Provider = function Provider(_ref) {\n     var value = _ref.value,\n         children = _ref.children;\n     var valueRef = React.useRef(value);\n     valueRef.current = value;\n\n     var _React$useState = React.useState(function () {\n       return {\n         getValue: function getValue() {\n           return valueRef.current;\n         },\n         listeners: new Set()\n       };\n     }),\n         _React$useState2 = (0, _slicedToArray2.default)(_React$useState, 1),\n         context = _React$useState2[0];\n\n     (0, _useLayoutEffect.default)(function () {\n       context.listeners.forEach(function (listener) {\n         listener(value);\n       });\n     }, [value]);\n     return /*#__PURE__*/React.createElement(Context.Provider, {\n       value: context\n     }, children);\n   };\n\n   return {\n     Context: Context,\n     Provider: Provider\n   };\n }\n\n function useContextSelector(holder, selector) {\n   var eventSelector = (0, _useEvent.default)(selector);\n   var context = React.useContext(holder === null || holder === void 0 ? void 0 : holder.Context);\n\n   var _ref2 = context || {},\n       listeners = _ref2.listeners,\n       getValue = _ref2.getValue;\n\n   var _React$useState3 = React.useState(function () {\n     return eventSelector(context ? getValue() : null);\n   }),\n       _React$useState4 = (0, _slicedToArray2.default)(_React$useState3, 2),\n       value = _React$useState4[0],\n       setValue = _React$useState4[1];\n\n   (0, _useLayoutEffect.default)(function () {\n     if (!context) {\n       return;\n     }\n\n     function trigger(nextValue) {\n       setValue(function (prev) {\n         var selectedValue = eventSelector(nextValue);\n         return (0, _shallowequal.default)(prev, selectedValue) ? prev : selectedValue;\n       });\n     }\n\n     listeners.add(trigger);\n     return function () {\n       listeners.delete(trigger);\n     };\n   }, [context]);\n   return value;\n }\n\n// #endregion ORIGINAL CODE\n\n_cjsExports = module.exports;\n___esModule = module.exports.__esModule;\n_createContext = module.exports.createContext;\n_useContextSelector = module.exports.useContextSelector;\n\n}, () => ({\n  '@babel/runtime/helpers/interopRequireDefault': _req,\n  '@babel/runtime/helpers/typeof': _req0,\n  '@babel/runtime/helpers/slicedToArray': _req1,\n  'react': _req2,\n  'rc-util/lib/hooks/useLayoutEffect': _req3,\n  'rc-util/lib/hooks/useEvent': _req4,\n  'shallowequal': _req5,\n}));\nexport { _cjsExports as default };\nexport { __cjsMetaURL }\n"]}