{"version":3,"sources":["file:///Users/longbow/node_modules/rc-table/lib/hooks/useFrame.js"],"names":["_cjsLoader","_req","__cjsMetaURL","_req0","_req1","url","define","exports","require","module","__filename","__dirname","_interopRequireDefault","Object","defineProperty","value","useLayoutState","useTimeoutLock","_slicedToArray2","_react","defaultState","stateRef","useRef","_useState","useState","_useState2","default","forceUpdate","lastPromiseRef","updateBatchRef","setFrameState","updater","current","push","promise","Promise","resolve","then","prevBatch","prevState","forEach","batchUpdater","useEffect","frameRef","timeoutRef","cleanUp","window","clearTimeout","setState","newState","setTimeout","undefined","getState","_cjsExports","___esModule","__esModule","_useLayoutState","_useTimeoutLock"],"mappings":"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","sourcesContent":["import _cjsLoader from 'cce:/internal/ml/cjs-loader.mjs';\nimport { __cjsMetaURL as _req} from '@babel/runtime/helpers/interopRequireDefault';\nimport { __cjsMetaURL as _req0} from '@babel/runtime/helpers/slicedToArray';\nimport { __cjsMetaURL as _req1} from 'react';\nlet _cjsExports;\nlet ___esModule;\nlet _useLayoutState;\nlet _useTimeoutLock;\nconst __cjsMetaURL = import.meta.url;\n_cjsLoader.define(__cjsMetaURL, function (exports, require, module, __filename, __dirname) {\n// #region ORIGINAL CODE\n\n\n \"use strict\";\n\n var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\n Object.defineProperty(exports, \"__esModule\", {\n   value: true\n });\n exports.useLayoutState = useLayoutState;\n exports.useTimeoutLock = useTimeoutLock;\n\n var _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\n var _react = require(\"react\");\n\n /**\n  * Execute code before next frame but async\n  */\n function useLayoutState(defaultState) {\n   var stateRef = (0, _react.useRef)(defaultState);\n\n   var _useState = (0, _react.useState)({}),\n       _useState2 = (0, _slicedToArray2.default)(_useState, 2),\n       forceUpdate = _useState2[1];\n\n   var lastPromiseRef = (0, _react.useRef)(null);\n   var updateBatchRef = (0, _react.useRef)([]);\n\n   function setFrameState(updater) {\n     updateBatchRef.current.push(updater);\n     var promise = Promise.resolve();\n     lastPromiseRef.current = promise;\n     promise.then(function () {\n       if (lastPromiseRef.current === promise) {\n         var prevBatch = updateBatchRef.current;\n         var prevState = stateRef.current;\n         updateBatchRef.current = [];\n         prevBatch.forEach(function (batchUpdater) {\n           stateRef.current = batchUpdater(stateRef.current);\n         });\n         lastPromiseRef.current = null;\n\n         if (prevState !== stateRef.current) {\n           forceUpdate({});\n         }\n       }\n     });\n   }\n\n   (0, _react.useEffect)(function () {\n     return function () {\n       lastPromiseRef.current = null;\n     };\n   }, []);\n   return [stateRef.current, setFrameState];\n }\n /** Lock frame, when frame pass reset the lock. */\n\n\n function useTimeoutLock(defaultState) {\n   var frameRef = (0, _react.useRef)(defaultState || null);\n   var timeoutRef = (0, _react.useRef)();\n\n   function cleanUp() {\n     window.clearTimeout(timeoutRef.current);\n   }\n\n   function setState(newState) {\n     frameRef.current = newState;\n     cleanUp();\n     timeoutRef.current = window.setTimeout(function () {\n       frameRef.current = null;\n       timeoutRef.current = undefined;\n     }, 100);\n   }\n\n   function getState() {\n     return frameRef.current;\n   }\n\n   (0, _react.useEffect)(function () {\n     return cleanUp;\n   }, []);\n   return [setState, getState];\n }\n\n// #endregion ORIGINAL CODE\n\n_cjsExports = module.exports;\n___esModule = module.exports.__esModule;\n_useLayoutState = module.exports.useLayoutState;\n_useTimeoutLock = module.exports.useTimeoutLock;\n\n}, () => ({\n  '@babel/runtime/helpers/interopRequireDefault': _req,\n  '@babel/runtime/helpers/slicedToArray': _req0,\n  'react': _req1,\n}));\nexport { _cjsExports as default };\nexport { __cjsMetaURL }\n"]}