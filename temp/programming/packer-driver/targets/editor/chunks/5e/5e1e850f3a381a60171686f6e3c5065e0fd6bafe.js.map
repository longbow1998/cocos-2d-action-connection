{"version":3,"sources":["file:///Users/longbow/node_modules/rc-field-form/lib/utils/NameMap.js"],"names":["_cjsLoader","_req","__cjsMetaURL","_req0","_req1","_req2","_req3","_req4","url","define","exports","require","module","__filename","__dirname","_interopRequireDefault","default","Object","defineProperty","value","_slicedToArray2","_toConsumableArray2","_classCallCheck2","_createClass2","_typeof2","SPLIT","normalize","namePath","map","cell","concat","join","NameMap","kvs","Map","key","set","get","update","updater","origin","next","delete","_delete","callback","entries","_ref","_ref2","cells","split","_cell$match","match","_cell$match2","type","unit","Number","toJSON","json","_ref3","_default","_cjsExports","___esModule","__esModule","_default0"],"mappings":"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","sourcesContent":["import _cjsLoader from 'cce:/internal/ml/cjs-loader.mjs';\nimport { __cjsMetaURL as _req} from '@babel/runtime/helpers/interopRequireDefault';\nimport { __cjsMetaURL as _req0} from '@babel/runtime/helpers/slicedToArray';\nimport { __cjsMetaURL as _req1} from '@babel/runtime/helpers/toConsumableArray';\nimport { __cjsMetaURL as _req2} from '@babel/runtime/helpers/classCallCheck';\nimport { __cjsMetaURL as _req3} from '@babel/runtime/helpers/createClass';\nimport { __cjsMetaURL as _req4} from '@babel/runtime/helpers/typeof';\nlet _cjsExports;\nlet ___esModule;\nlet _default0;\nconst __cjsMetaURL = import.meta.url;\n_cjsLoader.define(__cjsMetaURL, function (exports, require, module, __filename, __dirname) {\n// #region ORIGINAL CODE\n\n\n \"use strict\";\n\n var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\").default;\n Object.defineProperty(exports, \"__esModule\", {\n   value: true\n });\n exports.default = void 0;\n var _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n var _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\n var _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n var _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n var _typeof2 = _interopRequireDefault(require(\"@babel/runtime/helpers/typeof\"));\n var SPLIT = '__@field_split__';\n /**\n  * Convert name path into string to fast the fetch speed of Map.\n  */\n function normalize(namePath) {\n   return namePath.map(function (cell) {\n     return \"\".concat((0, _typeof2.default)(cell), \":\").concat(cell);\n   })\n   // Magic split\n   .join(SPLIT);\n }\n /**\n  * NameMap like a `Map` but accepts `string[]` as key.\n  */\n var NameMap = /*#__PURE__*/function () {\n   function NameMap() {\n     (0, _classCallCheck2.default)(this, NameMap);\n     this.kvs = new Map();\n   }\n   (0, _createClass2.default)(NameMap, [{\n     key: \"set\",\n     value: function set(key, value) {\n       this.kvs.set(normalize(key), value);\n     }\n   }, {\n     key: \"get\",\n     value: function get(key) {\n       return this.kvs.get(normalize(key));\n     }\n   }, {\n     key: \"update\",\n     value: function update(key, updater) {\n       var origin = this.get(key);\n       var next = updater(origin);\n       if (!next) {\n         this.delete(key);\n       } else {\n         this.set(key, next);\n       }\n     }\n   }, {\n     key: \"delete\",\n     value: function _delete(key) {\n       this.kvs.delete(normalize(key));\n     }\n     // Since we only use this in test, let simply realize this\n   }, {\n     key: \"map\",\n     value: function map(callback) {\n       return (0, _toConsumableArray2.default)(this.kvs.entries()).map(function (_ref) {\n         var _ref2 = (0, _slicedToArray2.default)(_ref, 2),\n           key = _ref2[0],\n           value = _ref2[1];\n         var cells = key.split(SPLIT);\n         return callback({\n           key: cells.map(function (cell) {\n             var _cell$match = cell.match(/^([^:]*):(.*)$/),\n               _cell$match2 = (0, _slicedToArray2.default)(_cell$match, 3),\n               type = _cell$match2[1],\n               unit = _cell$match2[2];\n             return type === 'number' ? Number(unit) : unit;\n           }),\n           value: value\n         });\n       });\n     }\n   }, {\n     key: \"toJSON\",\n     value: function toJSON() {\n       var json = {};\n       this.map(function (_ref3) {\n         var key = _ref3.key,\n           value = _ref3.value;\n         json[key.join('.')] = value;\n         return null;\n       });\n       return json;\n     }\n   }]);\n   return NameMap;\n }();\n var _default = NameMap;\n exports.default = _default;\n\n// #endregion ORIGINAL CODE\n\n_cjsExports = module.exports;\n___esModule = module.exports.__esModule;\n_default0 = module.exports.default;\n\n}, () => ({\n  '@babel/runtime/helpers/interopRequireDefault': _req,\n  '@babel/runtime/helpers/slicedToArray': _req0,\n  '@babel/runtime/helpers/toConsumableArray': _req1,\n  '@babel/runtime/helpers/classCallCheck': _req2,\n  '@babel/runtime/helpers/createClass': _req3,\n  '@babel/runtime/helpers/typeof': _req4,\n}));\nexport { _cjsExports as default };\nexport { __cjsMetaURL }\n"]}