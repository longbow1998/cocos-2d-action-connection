{"version":3,"sources":["file:///Users/longbow/node_modules/rc-util/lib/hooks/useMergedState.js"],"names":["_cjsLoader","_req","__cjsMetaURL","_req0","_req1","_req2","_req3","url","define","exports","require","module","__filename","__dirname","_interopRequireDefault","default","Object","defineProperty","value","useMergedState","_slicedToArray2","_useEvent","_useLayoutEffect","_useState5","hasValue","undefined","defaultStateValue","option","_ref","defaultValue","onChange","postState","_useState","_useState2","innerValue","setInnerValue","mergedValue","postMergedValue","onChangeFn","_useState3","_useState4","prevValue","setPrevValue","useLayoutUpdateEffect","prev","triggerChange","updater","ignoreDestroy","_cjsExports","___esModule","__esModule","_default"],"mappings":"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","sourcesContent":["import _cjsLoader from 'cce:/internal/ml/cjs-loader.mjs';\nimport { __cjsMetaURL as _req} from '@babel/runtime/helpers/interopRequireDefault';\nimport { __cjsMetaURL as _req0} from '@babel/runtime/helpers/slicedToArray';\nimport { __cjsMetaURL as _req1} from './useEvent';\nimport { __cjsMetaURL as _req2} from './useLayoutEffect';\nimport { __cjsMetaURL as _req3} from './useState';\nlet _cjsExports;\nlet ___esModule;\nlet _default;\nconst __cjsMetaURL = import.meta.url;\n_cjsLoader.define(__cjsMetaURL, function (exports, require, module, __filename, __dirname) {\n// #region ORIGINAL CODE\n\n\n \"use strict\";\n\n var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\").default;\n Object.defineProperty(exports, \"__esModule\", {\n   value: true\n });\n exports.default = useMergedState;\n var _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n var _useEvent = _interopRequireDefault(require(\"./useEvent\"));\n var _useLayoutEffect = require(\"./useLayoutEffect\");\n var _useState5 = _interopRequireDefault(require(\"./useState\"));\n /** We only think `undefined` is empty */\n function hasValue(value) {\n   return value !== undefined;\n }\n\n /**\n  * Similar to `useState` but will use props value if provided.\n  * Note that internal use rc-util `useState` hook.\n  */\n function useMergedState(defaultStateValue, option) {\n   var _ref = option || {},\n     defaultValue = _ref.defaultValue,\n     value = _ref.value,\n     onChange = _ref.onChange,\n     postState = _ref.postState;\n\n   // ======================= Init =======================\n   var _useState = (0, _useState5.default)(function () {\n       if (hasValue(value)) {\n         return value;\n       } else if (hasValue(defaultValue)) {\n         return typeof defaultValue === 'function' ? defaultValue() : defaultValue;\n       } else {\n         return typeof defaultStateValue === 'function' ? defaultStateValue() : defaultStateValue;\n       }\n     }),\n     _useState2 = (0, _slicedToArray2.default)(_useState, 2),\n     innerValue = _useState2[0],\n     setInnerValue = _useState2[1];\n   var mergedValue = value !== undefined ? value : innerValue;\n   var postMergedValue = postState ? postState(mergedValue) : mergedValue;\n\n   // ====================== Change ======================\n   var onChangeFn = (0, _useEvent.default)(onChange);\n   var _useState3 = (0, _useState5.default)([mergedValue]),\n     _useState4 = (0, _slicedToArray2.default)(_useState3, 2),\n     prevValue = _useState4[0],\n     setPrevValue = _useState4[1];\n   (0, _useLayoutEffect.useLayoutUpdateEffect)(function () {\n     var prev = prevValue[0];\n     if (innerValue !== prev) {\n       onChangeFn(innerValue, prev);\n     }\n   }, [prevValue]);\n\n   // Sync value back to `undefined` when it from control to un-control\n   (0, _useLayoutEffect.useLayoutUpdateEffect)(function () {\n     if (!hasValue(value)) {\n       setInnerValue(value);\n     }\n   }, [value]);\n\n   // ====================== Update ======================\n   var triggerChange = (0, _useEvent.default)(function (updater, ignoreDestroy) {\n     setInnerValue(updater, ignoreDestroy);\n     setPrevValue([mergedValue], ignoreDestroy);\n   });\n   return [postMergedValue, triggerChange];\n }\n\n// #endregion ORIGINAL CODE\n\n_cjsExports = module.exports;\n___esModule = module.exports.__esModule;\n_default = module.exports.default;\n\n}, () => ({\n  '@babel/runtime/helpers/interopRequireDefault': _req,\n  '@babel/runtime/helpers/slicedToArray': _req0,\n  './useEvent': _req1,\n  './useLayoutEffect': _req2,\n  './useState': _req3,\n}));\nexport { _cjsExports as default };\nexport { __cjsMetaURL }\n"]}