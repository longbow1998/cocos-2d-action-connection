{"version":3,"sources":["file:///Users/longbow/node_modules/@rc-component/portal/lib/Portal.js"],"names":["_cjsLoader","_req","__cjsMetaURL","_req0","_req1","_req2","_req3","_req4","_req5","_req6","_req7","_req8","_req9","url","define","exports","require","module","__filename","__dirname","_interopRequireWildcard","default","_interopRequireDefault","Object","defineProperty","value","_slicedToArray2","React","_reactDom","_canUseDom","_ref2","_Context","_useDom3","_useScrollLocker","_mock","getPortalContainer","getContainer","document","querySelector","Portal","forwardRef","props","ref","open","autoLock","debug","_props$autoDestroy","autoDestroy","children","_React$useState","useState","_React$useState2","shouldRender","setShouldRender","mergedRender","useEffect","_React$useState3","_React$useState4","innerContainer","setInnerContainer","customizeContainer","_useDom","_useDom2","defaultContainer","queueCreate","mergedContainer","body","childRef","supportRef","_ref","mergedRef","useComposeRef","undefined","renderInline","inlineMock","reffedChildren","cloneElement","createElement","Provider","createPortal","process","env","NODE_ENV","displayName","_default","_cjsExports","___esModule","__esModule","_default0"],"mappings":";;;;;;;;;AAAOA,MAAAA,U;;AACkBC,MAAAA,I,8CAAhBC,Y;;AACgBC,MAAAA,K,6CAAhBD,Y;;AACgBE,MAAAA,K,qCAAhBF,Y;;AACgBG,MAAAA,K,UAAhBH,Y;;AACgBI,MAAAA,K,cAAhBJ,Y;;AACgBK,MAAAA,K,0BAAhBL,Y;;AACgBM,MAAAA,K,iBAAhBN,Y;;AACgBO,MAAAA,K,iBAAhBP,Y;;AACgBQ,MAAAA,K,iBAAhBR,Y;;AACgBS,MAAAA,K,iBAAhBT,Y;;AACgBU,MAAAA,K,iBAAhBV,Y;;;8BAIHA,Y,GAAe,cAAYW,G;;AACjCb,MAAAA,UAAU,CAACc,MAAX,CAAkBZ,YAAlB,EAAgC,UAAUa,OAAV,EAAmBC,OAAnB,EAA4BC,MAA5B,EAAoCC,UAApC,EAAgDC,SAAhD,EAA2D;AAC3F;AAGC;;AAEA,YAAIC,uBAAuB,GAAGJ,OAAO,CAAC,+CAAD,CAAP,CAAyDK,OAAvF;;AAEA,YAAIC,sBAAsB,GAAGN,OAAO,CAAC,8CAAD,CAAP,CAAwDK,OAArF;;AAEAE,QAAAA,MAAM,CAACC,cAAP,CAAsBT,OAAtB,EAA+B,YAA/B,EAA6C;AAC3CU,UAAAA,KAAK,EAAE;AADoC,SAA7C;AAGAV,QAAAA,OAAO,CAACM,OAAR,GAAkB,KAAK,CAAvB;;AAEA,YAAIK,eAAe,GAAGJ,sBAAsB,CAACN,OAAO,CAAC,sCAAD,CAAR,CAA5C;;AAEA,YAAIW,KAAK,GAAGP,uBAAuB,CAACJ,OAAO,CAAC,OAAD,CAAR,CAAnC;;AAEA,YAAIY,SAAS,GAAGZ,OAAO,CAAC,WAAD,CAAvB;;AAEA,YAAIa,UAAU,GAAGP,sBAAsB,CAACN,OAAO,CAAC,2BAAD,CAAR,CAAvC;;AAEA,YAAIc,KAAK,GAAGd,OAAO,CAAC,iBAAD,CAAnB;;AAEA,YAAIe,QAAQ,GAAGT,sBAAsB,CAACN,OAAO,CAAC,WAAD,CAAR,CAArC;;AAEA,YAAIgB,QAAQ,GAAGV,sBAAsB,CAACN,OAAO,CAAC,UAAD,CAAR,CAArC;;AAEA,YAAIiB,gBAAgB,GAAGX,sBAAsB,CAACN,OAAO,CAAC,mBAAD,CAAR,CAA7C;;AAEA,YAAIkB,KAAK,GAAGlB,OAAO,CAAC,QAAD,CAAnB;;AAEA,YAAImB,kBAAkB,GAAG,SAASA,kBAAT,CAA4BC,YAA5B,EAA0C;AACjE,cAAIA,YAAY,KAAK,KAArB,EAA4B;AAC1B,mBAAO,KAAP;AACD;;AAED,cAAI,CAAC,CAAC,GAAGP,UAAU,CAACR,OAAf,GAAD,IAA8B,CAACe,YAAnC,EAAiD;AAC/C,mBAAO,IAAP;AACD;;AAED,cAAI,OAAOA,YAAP,KAAwB,QAA5B,EAAsC;AACpC,mBAAOC,QAAQ,CAACC,aAAT,CAAuBF,YAAvB,CAAP;AACD;;AAED,cAAI,OAAOA,YAAP,KAAwB,UAA5B,EAAwC;AACtC,mBAAOA,YAAY,EAAnB;AACD;;AAED,iBAAOA,YAAP;AACD,SAlBD;;AAoBA,YAAIG,MAAM,GAAG,aAAaZ,KAAK,CAACa,UAAN,CAAiB,UAAUC,KAAV,EAAiBC,GAAjB,EAAsB;AAC/D,cAAIC,IAAI,GAAGF,KAAK,CAACE,IAAjB;AAAA,cACIC,QAAQ,GAAGH,KAAK,CAACG,QADrB;AAAA,cAEIR,YAAY,GAAGK,KAAK,CAACL,YAFzB;AAAA,cAGIS,KAAK,GAAGJ,KAAK,CAACI,KAHlB;AAAA,cAIIC,kBAAkB,GAAGL,KAAK,CAACM,WAJ/B;AAAA,cAKIA,WAAW,GAAGD,kBAAkB,KAAK,KAAK,CAA5B,GAAgC,IAAhC,GAAuCA,kBALzD;AAAA,cAMIE,QAAQ,GAAGP,KAAK,CAACO,QANrB;;AAQA,cAAIC,eAAe,GAAGtB,KAAK,CAACuB,QAAN,CAAeP,IAAf,CAAtB;AAAA,cACIQ,gBAAgB,GAAG,CAAC,GAAGzB,eAAe,CAACL,OAApB,EAA6B4B,eAA7B,EAA8C,CAA9C,CADvB;AAAA,cAEIG,YAAY,GAAGD,gBAAgB,CAAC,CAAD,CAFnC;AAAA,cAGIE,eAAe,GAAGF,gBAAgB,CAAC,CAAD,CAHtC;;AAKA,cAAIG,YAAY,GAAGF,YAAY,IAAIT,IAAnC,CAd+D,CActB;;AAEzChB,UAAAA,KAAK,CAAC4B,SAAN,CAAgB,YAAY;AAC1B,gBAAIR,WAAW,IAAIJ,IAAnB,EAAyB;AACvBU,cAAAA,eAAe,CAACV,IAAD,CAAf;AACD;AACF,WAJD,EAIG,CAACA,IAAD,EAAOI,WAAP,CAJH,EAhB+D,CAoBtC;;AAEzB,cAAIS,gBAAgB,GAAG7B,KAAK,CAACuB,QAAN,CAAe,YAAY;AAChD,mBAAOf,kBAAkB,CAACC,YAAD,CAAzB;AACD,WAFsB,CAAvB;AAAA,cAGIqB,gBAAgB,GAAG,CAAC,GAAG/B,eAAe,CAACL,OAApB,EAA6BmC,gBAA7B,EAA+C,CAA/C,CAHvB;AAAA,cAIIE,cAAc,GAAGD,gBAAgB,CAAC,CAAD,CAJrC;AAAA,cAKIE,iBAAiB,GAAGF,gBAAgB,CAAC,CAAD,CALxC;;AAOA9B,UAAAA,KAAK,CAAC4B,SAAN,CAAgB,YAAY;AAC1B,gBAAIK,kBAAkB,GAAGzB,kBAAkB,CAACC,YAAD,CAA3C,CAD0B,CACiC;;AAE3DuB,YAAAA,iBAAiB,CAACC,kBAAkB,KAAK,IAAvB,IAA+BA,kBAAkB,KAAK,KAAK,CAA3D,GAA+DA,kBAA/D,GAAoF,IAArF,CAAjB;AACD,WAJD;;AAMA,cAAIC,OAAO,GAAG,CAAC,GAAG7B,QAAQ,CAACX,OAAb,EAAsBiC,YAAY,IAAI,CAACI,cAAvC,EAAuDb,KAAvD,CAAd;AAAA,cACIiB,QAAQ,GAAG,CAAC,GAAGpC,eAAe,CAACL,OAApB,EAA6BwC,OAA7B,EAAsC,CAAtC,CADf;AAAA,cAEIE,gBAAgB,GAAGD,QAAQ,CAAC,CAAD,CAF/B;AAAA,cAGIE,WAAW,GAAGF,QAAQ,CAAC,CAAD,CAH1B;;AAKA,cAAIG,eAAe,GAAGP,cAAc,KAAK,IAAnB,IAA2BA,cAAc,KAAK,KAAK,CAAnD,GAAuDA,cAAvD,GAAwEK,gBAA9F,CAxC+D,CAwCiD;;AAEhH,WAAC,GAAG9B,gBAAgB,CAACZ,OAArB,EAA8BuB,QAAQ,IAAID,IAAZ,IAAoB,CAAC,GAAGd,UAAU,CAACR,OAAf,GAApB,KAAkD4C,eAAe,KAAKF,gBAApB,IAAwCE,eAAe,KAAK5B,QAAQ,CAAC6B,IAAvH,CAA9B,EA1C+D,CA0C8F;;AAE7J,cAAIC,QAAQ,GAAG,IAAf;;AAEA,cAAInB,QAAQ,IAAI,CAAC,GAAGlB,KAAK,CAACsC,UAAV,EAAsBpB,QAAtB,CAAZ,IAA+CN,GAAnD,EAAwD;AACtD,gBAAI2B,IAAI,GAAGrB,QAAX;AACAmB,YAAAA,QAAQ,GAAGE,IAAI,CAAC3B,GAAhB;AACD;;AAED,cAAI4B,SAAS,GAAG,CAAC,GAAGxC,KAAK,CAACyC,aAAV,EAAyBJ,QAAzB,EAAmCzB,GAAnC,CAAhB,CAnD+D,CAmDN;AACzD;AACA;;AAEA,cAAI,CAACY,YAAD,IAAiB,CAAC,CAAC,GAAGzB,UAAU,CAACR,OAAf,GAAlB,IAA+CqC,cAAc,KAAKc,SAAtE,EAAiF;AAC/E,mBAAO,IAAP;AACD,WAzD8D,CAyD7D;;;AAGF,cAAIC,YAAY,GAAGR,eAAe,KAAK,KAApB,IAA6B,CAAC,GAAG/B,KAAK,CAACwC,UAAV,GAAhD;AACA,cAAIC,cAAc,GAAG3B,QAArB;;AAEA,cAAIN,GAAJ,EAAS;AACPiC,YAAAA,cAAc,GAAG,aAAahD,KAAK,CAACiD,YAAN,CAAmB5B,QAAnB,EAA6B;AACzDN,cAAAA,GAAG,EAAE4B;AADoD,aAA7B,CAA9B;AAGD;;AAED,iBAAO,aAAa3C,KAAK,CAACkD,aAAN,CAAoB9C,QAAQ,CAACV,OAAT,CAAiByD,QAArC,EAA+C;AACjErD,YAAAA,KAAK,EAAEuC;AAD0D,WAA/C,EAEjBS,YAAY,GAAGE,cAAH,GAAoB,aAAa,CAAC,GAAG/C,SAAS,CAACmD,YAAd,EAA4BJ,cAA5B,EAA4CV,eAA5C,CAF5B,CAApB;AAGD,SAxEyB,CAA1B;;AA0EA,YAAIe,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAA7B,EAA2C;AACzC3C,UAAAA,MAAM,CAAC4C,WAAP,GAAqB,QAArB;AACD;;AAED,YAAIC,QAAQ,GAAG7C,MAAf;AACAxB,QAAAA,OAAO,CAACM,OAAR,GAAkB+D,QAAlB,CApI0F,CAsI3F;;AAEA,2BAAAC,WAAW,GAAGpE,MAAM,CAACF,OAArB;;AACAuE,QAAAA,WAAW,GAAGrE,MAAM,CAACF,OAAP,CAAewE,UAA7B;AACAC,QAAAA,SAAS,GAAGvE,MAAM,CAACF,OAAP,CAAeM,OAA3B;AAEC,OA5ID,EA4IG,OAAO;AACR,yDAAiDpB,IADzC;AAER,wDAAgDE,KAFxC;AAGR,gDAAwCC,KAHhC;AAIR,iBAASC,KAJD;AAKR,qBAAaC,KALL;AAMR,qCAA6BC,KANrB;AAOR,2BAAmBC,KAPX;AAQR,qBAAaC,KARL;AASR,oBAAYC,KATJ;AAUR,6BAAqBC,KAVb;AAWR,kBAAUC;AAXF,OAAP,CA5IH","sourcesContent":["import _cjsLoader from 'cce:/internal/ml/cjs-loader.mjs';\nimport { __cjsMetaURL as _req} from '@babel/runtime/helpers/interopRequireWildcard';\nimport { __cjsMetaURL as _req0} from '@babel/runtime/helpers/interopRequireDefault';\nimport { __cjsMetaURL as _req1} from '@babel/runtime/helpers/slicedToArray';\nimport { __cjsMetaURL as _req2} from 'react';\nimport { __cjsMetaURL as _req3} from 'react-dom';\nimport { __cjsMetaURL as _req4} from 'rc-util/lib/Dom/canUseDom';\nimport { __cjsMetaURL as _req5} from 'rc-util/lib/ref';\nimport { __cjsMetaURL as _req6} from './Context';\nimport { __cjsMetaURL as _req7} from './useDom';\nimport { __cjsMetaURL as _req8} from './useScrollLocker';\nimport { __cjsMetaURL as _req9} from './mock';\nlet _cjsExports;\nlet ___esModule;\nlet _default0;\nconst __cjsMetaURL = import.meta.url;\n_cjsLoader.define(__cjsMetaURL, function (exports, require, module, __filename, __dirname) {\n// #region ORIGINAL CODE\n\n\n \"use strict\";\n\n var _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\").default;\n\n var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\").default;\n\n Object.defineProperty(exports, \"__esModule\", {\n   value: true\n });\n exports.default = void 0;\n\n var _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\n var React = _interopRequireWildcard(require(\"react\"));\n\n var _reactDom = require(\"react-dom\");\n\n var _canUseDom = _interopRequireDefault(require(\"rc-util/lib/Dom/canUseDom\"));\n\n var _ref2 = require(\"rc-util/lib/ref\");\n\n var _Context = _interopRequireDefault(require(\"./Context\"));\n\n var _useDom3 = _interopRequireDefault(require(\"./useDom\"));\n\n var _useScrollLocker = _interopRequireDefault(require(\"./useScrollLocker\"));\n\n var _mock = require(\"./mock\");\n\n var getPortalContainer = function getPortalContainer(getContainer) {\n   if (getContainer === false) {\n     return false;\n   }\n\n   if (!(0, _canUseDom.default)() || !getContainer) {\n     return null;\n   }\n\n   if (typeof getContainer === 'string') {\n     return document.querySelector(getContainer);\n   }\n\n   if (typeof getContainer === 'function') {\n     return getContainer();\n   }\n\n   return getContainer;\n };\n\n var Portal = /*#__PURE__*/React.forwardRef(function (props, ref) {\n   var open = props.open,\n       autoLock = props.autoLock,\n       getContainer = props.getContainer,\n       debug = props.debug,\n       _props$autoDestroy = props.autoDestroy,\n       autoDestroy = _props$autoDestroy === void 0 ? true : _props$autoDestroy,\n       children = props.children;\n\n   var _React$useState = React.useState(open),\n       _React$useState2 = (0, _slicedToArray2.default)(_React$useState, 2),\n       shouldRender = _React$useState2[0],\n       setShouldRender = _React$useState2[1];\n\n   var mergedRender = shouldRender || open; // ====================== Should Render ======================\n\n   React.useEffect(function () {\n     if (autoDestroy || open) {\n       setShouldRender(open);\n     }\n   }, [open, autoDestroy]); // ======================== Container ========================\n\n   var _React$useState3 = React.useState(function () {\n     return getPortalContainer(getContainer);\n   }),\n       _React$useState4 = (0, _slicedToArray2.default)(_React$useState3, 2),\n       innerContainer = _React$useState4[0],\n       setInnerContainer = _React$useState4[1];\n\n   React.useEffect(function () {\n     var customizeContainer = getPortalContainer(getContainer); // Tell component that we check this in effect which is safe to be `null`\n\n     setInnerContainer(customizeContainer !== null && customizeContainer !== void 0 ? customizeContainer : null);\n   });\n\n   var _useDom = (0, _useDom3.default)(mergedRender && !innerContainer, debug),\n       _useDom2 = (0, _slicedToArray2.default)(_useDom, 2),\n       defaultContainer = _useDom2[0],\n       queueCreate = _useDom2[1];\n\n   var mergedContainer = innerContainer !== null && innerContainer !== void 0 ? innerContainer : defaultContainer; // ========================= Locker ==========================\n\n   (0, _useScrollLocker.default)(autoLock && open && (0, _canUseDom.default)() && (mergedContainer === defaultContainer || mergedContainer === document.body)); // =========================== Ref ===========================\n\n   var childRef = null;\n\n   if (children && (0, _ref2.supportRef)(children) && ref) {\n     var _ref = children;\n     childRef = _ref.ref;\n   }\n\n   var mergedRef = (0, _ref2.useComposeRef)(childRef, ref); // ========================= Render ==========================\n   // Do not render when nothing need render\n   // When innerContainer is `undefined`, it may not ready since user use ref in the same render\n\n   if (!mergedRender || !(0, _canUseDom.default)() || innerContainer === undefined) {\n     return null;\n   } // Render inline\n\n\n   var renderInline = mergedContainer === false || (0, _mock.inlineMock)();\n   var reffedChildren = children;\n\n   if (ref) {\n     reffedChildren = /*#__PURE__*/React.cloneElement(children, {\n       ref: mergedRef\n     });\n   }\n\n   return /*#__PURE__*/React.createElement(_Context.default.Provider, {\n     value: queueCreate\n   }, renderInline ? reffedChildren : /*#__PURE__*/(0, _reactDom.createPortal)(reffedChildren, mergedContainer));\n });\n\n if (process.env.NODE_ENV !== 'production') {\n   Portal.displayName = 'Portal';\n }\n\n var _default = Portal;\n exports.default = _default;\n\n// #endregion ORIGINAL CODE\n\n_cjsExports = module.exports;\n___esModule = module.exports.__esModule;\n_default0 = module.exports.default;\n\n}, () => ({\n  '@babel/runtime/helpers/interopRequireWildcard': _req,\n  '@babel/runtime/helpers/interopRequireDefault': _req0,\n  '@babel/runtime/helpers/slicedToArray': _req1,\n  'react': _req2,\n  'react-dom': _req3,\n  'rc-util/lib/Dom/canUseDom': _req4,\n  'rc-util/lib/ref': _req5,\n  './Context': _req6,\n  './useDom': _req7,\n  './useScrollLocker': _req8,\n  './mock': _req9,\n}));\nexport { _cjsExports as default };\nexport { __cjsMetaURL }\n"]}