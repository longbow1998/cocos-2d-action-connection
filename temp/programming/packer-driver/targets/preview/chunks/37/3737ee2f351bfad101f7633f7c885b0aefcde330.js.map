{"version":3,"sources":["file:///Users/longbow/node_modules/rc-virtual-list/lib/hooks/useMobileTouchMove.js"],"names":["_cjsLoader","_req","__cjsMetaURL","_req0","_req1","url","define","exports","require","module","__filename","__dirname","_interopRequireDefault","default","Object","defineProperty","value","useMobileTouchMove","_react","_useLayoutEffect","SMOOTH_PTG","inVirtual","listRef","callback","touchedRef","useRef","touchYRef","elementRef","intervalRef","cleanUpEvents","onTouchMove","e","current","currentY","Math","ceil","touches","pageY","offsetY","preventDefault","clearInterval","setInterval","abs","onTouchEnd","onTouchStart","length","target","addEventListener","removeEventListener","_listRef$current","_cjsExports","___esModule","__esModule","_default"],"mappings":"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","sourcesContent":["import _cjsLoader from 'cce:/internal/ml/cjs-loader.mjs';\nimport { __cjsMetaURL as _req} from '@babel/runtime/helpers/interopRequireDefault';\nimport { __cjsMetaURL as _req0} from 'react';\nimport { __cjsMetaURL as _req1} from 'rc-util/lib/hooks/useLayoutEffect';\nlet _cjsExports;\nlet ___esModule;\nlet _default;\nconst __cjsMetaURL = import.meta.url;\n_cjsLoader.define(__cjsMetaURL, function (exports, require, module, __filename, __dirname) {\n// #region ORIGINAL CODE\n\n\n \"use strict\";\n\n var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\").default;\n Object.defineProperty(exports, \"__esModule\", {\n   value: true\n });\n exports.default = useMobileTouchMove;\n var _react = require(\"react\");\n var _useLayoutEffect = _interopRequireDefault(require(\"rc-util/lib/hooks/useLayoutEffect\"));\n var SMOOTH_PTG = 14 / 15;\n function useMobileTouchMove(inVirtual, listRef, callback) {\n   var touchedRef = (0, _react.useRef)(false);\n   var touchYRef = (0, _react.useRef)(0);\n   var elementRef = (0, _react.useRef)(null);\n   // Smooth scroll\n   var intervalRef = (0, _react.useRef)(null);\n   /* eslint-disable prefer-const */\n   var cleanUpEvents;\n   var onTouchMove = function onTouchMove(e) {\n     if (touchedRef.current) {\n       var currentY = Math.ceil(e.touches[0].pageY);\n       var offsetY = touchYRef.current - currentY;\n       touchYRef.current = currentY;\n       if (callback(offsetY)) {\n         e.preventDefault();\n       }\n       // Smooth interval\n       clearInterval(intervalRef.current);\n       intervalRef.current = setInterval(function () {\n         offsetY *= SMOOTH_PTG;\n         if (!callback(offsetY, true) || Math.abs(offsetY) <= 0.1) {\n           clearInterval(intervalRef.current);\n         }\n       }, 16);\n     }\n   };\n   var onTouchEnd = function onTouchEnd() {\n     touchedRef.current = false;\n     cleanUpEvents();\n   };\n   var onTouchStart = function onTouchStart(e) {\n     cleanUpEvents();\n     if (e.touches.length === 1 && !touchedRef.current) {\n       touchedRef.current = true;\n       touchYRef.current = Math.ceil(e.touches[0].pageY);\n       elementRef.current = e.target;\n       elementRef.current.addEventListener('touchmove', onTouchMove);\n       elementRef.current.addEventListener('touchend', onTouchEnd);\n     }\n   };\n   cleanUpEvents = function cleanUpEvents() {\n     if (elementRef.current) {\n       elementRef.current.removeEventListener('touchmove', onTouchMove);\n       elementRef.current.removeEventListener('touchend', onTouchEnd);\n     }\n   };\n   (0, _useLayoutEffect.default)(function () {\n     if (inVirtual) {\n       listRef.current.addEventListener('touchstart', onTouchStart);\n     }\n     return function () {\n       var _listRef$current;\n       (_listRef$current = listRef.current) === null || _listRef$current === void 0 ? void 0 : _listRef$current.removeEventListener('touchstart', onTouchStart);\n       cleanUpEvents();\n       clearInterval(intervalRef.current);\n     };\n   }, [inVirtual]);\n }\n\n// #endregion ORIGINAL CODE\n\n_cjsExports = module.exports;\n___esModule = module.exports.__esModule;\n_default = module.exports.default;\n\n}, () => ({\n  '@babel/runtime/helpers/interopRequireDefault': _req,\n  'react': _req0,\n  'rc-util/lib/hooks/useLayoutEffect': _req1,\n}));\nexport { _cjsExports as default };\nexport { __cjsMetaURL }\n"]}