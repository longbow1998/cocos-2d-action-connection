{"version":3,"sources":["file:///Users/longbow/node_modules/rc-virtual-list/lib/hooks/useFrameWheel.js"],"names":["_cjsLoader","_req","__cjsMetaURL","_req0","_req1","_req2","_req3","url","define","exports","require","module","__filename","__dirname","_interopRequireDefault","default","Object","defineProperty","value","useFrameWheel","_react","_raf","_isFirefox","_useOriginScroll","inVirtual","isScrollAtTop","isScrollAtBottom","onWheelDelta","offsetRef","useRef","nextFrameRef","wheelValueRef","isMouseScrollRef","originScroll","onWheel","event","cancel","current","deltaY","preventDefault","patchMultiple","onFireFoxScroll","detail","_cjsExports","___esModule","__esModule","_default"],"mappings":"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","sourcesContent":["import _cjsLoader from 'cce:/internal/ml/cjs-loader.mjs';\nimport { __cjsMetaURL as _req} from '@babel/runtime/helpers/interopRequireDefault';\nimport { __cjsMetaURL as _req0} from 'react';\nimport { __cjsMetaURL as _req1} from 'rc-util/lib/raf';\nimport { __cjsMetaURL as _req2} from '../utils/isFirefox';\nimport { __cjsMetaURL as _req3} from './useOriginScroll';\nlet _cjsExports;\nlet ___esModule;\nlet _default;\nconst __cjsMetaURL = import.meta.url;\n_cjsLoader.define(__cjsMetaURL, function (exports, require, module, __filename, __dirname) {\n// #region ORIGINAL CODE\n\n\n \"use strict\";\n\n var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\").default;\n Object.defineProperty(exports, \"__esModule\", {\n   value: true\n });\n exports.default = useFrameWheel;\n var _react = require(\"react\");\n var _raf = _interopRequireDefault(require(\"rc-util/lib/raf\"));\n var _isFirefox = _interopRequireDefault(require(\"../utils/isFirefox\"));\n var _useOriginScroll = _interopRequireDefault(require(\"./useOriginScroll\"));\n function useFrameWheel(inVirtual, isScrollAtTop, isScrollAtBottom, onWheelDelta) {\n   var offsetRef = (0, _react.useRef)(0);\n   var nextFrameRef = (0, _react.useRef)(null);\n   // Firefox patch\n   var wheelValueRef = (0, _react.useRef)(null);\n   var isMouseScrollRef = (0, _react.useRef)(false);\n   // Scroll status sync\n   var originScroll = (0, _useOriginScroll.default)(isScrollAtTop, isScrollAtBottom);\n   function onWheel(event) {\n     if (!inVirtual) return;\n     _raf.default.cancel(nextFrameRef.current);\n     var deltaY = event.deltaY;\n     offsetRef.current += deltaY;\n     wheelValueRef.current = deltaY;\n     // Do nothing when scroll at the edge, Skip check when is in scroll\n     if (originScroll(deltaY)) return;\n     // Proxy of scroll events\n     if (!_isFirefox.default) {\n       event.preventDefault();\n     }\n     nextFrameRef.current = (0, _raf.default)(function () {\n       // Patch a multiple for Firefox to fix wheel number too small\n       // ref: https://github.com/ant-design/ant-design/issues/26372#issuecomment-679460266\n       var patchMultiple = isMouseScrollRef.current ? 10 : 1;\n       onWheelDelta(offsetRef.current * patchMultiple);\n       offsetRef.current = 0;\n     });\n   }\n   // A patch for firefox\n   function onFireFoxScroll(event) {\n     if (!inVirtual) return;\n     isMouseScrollRef.current = event.detail === wheelValueRef.current;\n   }\n   return [onWheel, onFireFoxScroll];\n }\n\n// #endregion ORIGINAL CODE\n\n_cjsExports = module.exports;\n___esModule = module.exports.__esModule;\n_default = module.exports.default;\n\n}, () => ({\n  '@babel/runtime/helpers/interopRequireDefault': _req,\n  'react': _req0,\n  'rc-util/lib/raf': _req1,\n  '../utils/isFirefox': _req2,\n  './useOriginScroll': _req3,\n}));\nexport { _cjsExports as default };\nexport { __cjsMetaURL }\n"]}