{"version":3,"sources":["file:///Users/longbow/node_modules/rc-motion/lib/hooks/useStatus.js"],"names":["_cjsLoader","_req","__cjsMetaURL","_req0","_req1","_req2","_req3","_req4","_req5","_req6","_req7","_req8","_req9","url","define","exports","require","module","__filename","__dirname","_interopRequireDefault","_typeof","Object","defineProperty","value","default","useStatus","_objectSpread2","_defineProperty2","_slicedToArray2","React","_interopRequireWildcard","_useState7","_interface","_useStepQueue3","_useDomMotionEvents3","_useIsomorphicLayoutEffect","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","cache","has","get","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","supportMotion","visible","getElement","_ref","_ref$motionEnter","motionEnter","_ref$motionAppear","motionAppear","_ref$motionLeave","motionLeave","motionDeadline","motionLeaveImmediately","onAppearPrepare","onEnterPrepare","onLeavePrepare","onAppearStart","onEnterStart","onLeaveStart","onAppearActive","onEnterActive","onLeaveActive","onAppearEnd","onEnterEnd","onLeaveEnd","onVisibleChanged","_useState","_useState2","asyncVisible","setAsyncVisible","_useState3","STATUS_NONE","_useState4","status","setStatus","_useState5","_useState6","style","setStyle","mountedRef","useRef","deadlineRef","getDomElement","activeRef","onInternalMotionEnd","event","element","deadline","target","currentActive","current","canEnd","STATUS_APPEAR","STATUS_ENTER","STATUS_LEAVE","_useDomMotionEvents","_useDomMotionEvents2","patchMotionEvents","eventHandlers","useMemo","_ref2","_ref3","_ref4","STEP_PREPARE","STEP_START","STEP_ACTIVE","_useStepQueue","newStep","onPrepare","SkipStep","step","_eventHandlers$step","clearTimeout","setTimeout","DoStep","_useStepQueue2","startStep","active","isActive","isMounted","nextStatus","useEffect","firstMountChangeRef","undefined","mergedStyle","transition","_cjsExports","___esModule","_default"],"mappings":"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","sourcesContent":["import _cjsLoader from 'cce:/internal/ml/cjs-loader.mjs';\nimport { __cjsMetaURL as _req} from '@babel/runtime/helpers/interopRequireDefault';\nimport { __cjsMetaURL as _req0} from '@babel/runtime/helpers/typeof';\nimport { __cjsMetaURL as _req1} from '@babel/runtime/helpers/objectSpread2';\nimport { __cjsMetaURL as _req2} from '@babel/runtime/helpers/defineProperty';\nimport { __cjsMetaURL as _req3} from '@babel/runtime/helpers/slicedToArray';\nimport { __cjsMetaURL as _req4} from 'react';\nimport { __cjsMetaURL as _req5} from 'rc-util/lib/hooks/useState';\nimport { __cjsMetaURL as _req6} from '../interface';\nimport { __cjsMetaURL as _req7} from './useStepQueue';\nimport { __cjsMetaURL as _req8} from './useDomMotionEvents';\nimport { __cjsMetaURL as _req9} from './useIsomorphicLayoutEffect';\nlet _cjsExports;\nlet ___esModule;\nlet _default;\nconst __cjsMetaURL = import.meta.url;\n_cjsLoader.define(__cjsMetaURL, function (exports, require, module, __filename, __dirname) {\n// #region ORIGINAL CODE\n\n\n \"use strict\";\n\n var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\n var _typeof = require(\"@babel/runtime/helpers/typeof\");\n\n Object.defineProperty(exports, \"__esModule\", {\n   value: true\n });\n exports.default = useStatus;\n\n var _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread2\"));\n\n var _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\n var _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\n var React = _interopRequireWildcard(require(\"react\"));\n\n var _useState7 = _interopRequireDefault(require(\"rc-util/lib/hooks/useState\"));\n\n var _interface = require(\"../interface\");\n\n var _useStepQueue3 = _interopRequireWildcard(require(\"./useStepQueue\"));\n\n var _useDomMotionEvents3 = _interopRequireDefault(require(\"./useDomMotionEvents\"));\n\n var _useIsomorphicLayoutEffect = _interopRequireDefault(require(\"./useIsomorphicLayoutEffect\"));\n\n function _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\n function _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\n function useStatus(supportMotion, visible, getElement, _ref) {\n   var _ref$motionEnter = _ref.motionEnter,\n       motionEnter = _ref$motionEnter === void 0 ? true : _ref$motionEnter,\n       _ref$motionAppear = _ref.motionAppear,\n       motionAppear = _ref$motionAppear === void 0 ? true : _ref$motionAppear,\n       _ref$motionLeave = _ref.motionLeave,\n       motionLeave = _ref$motionLeave === void 0 ? true : _ref$motionLeave,\n       motionDeadline = _ref.motionDeadline,\n       motionLeaveImmediately = _ref.motionLeaveImmediately,\n       onAppearPrepare = _ref.onAppearPrepare,\n       onEnterPrepare = _ref.onEnterPrepare,\n       onLeavePrepare = _ref.onLeavePrepare,\n       onAppearStart = _ref.onAppearStart,\n       onEnterStart = _ref.onEnterStart,\n       onLeaveStart = _ref.onLeaveStart,\n       onAppearActive = _ref.onAppearActive,\n       onEnterActive = _ref.onEnterActive,\n       onLeaveActive = _ref.onLeaveActive,\n       onAppearEnd = _ref.onAppearEnd,\n       onEnterEnd = _ref.onEnterEnd,\n       onLeaveEnd = _ref.onLeaveEnd,\n       onVisibleChanged = _ref.onVisibleChanged;\n\n   // Used for outer render usage to avoid `visible: false & status: none` to render nothing\n   var _useState = (0, _useState7.default)(),\n       _useState2 = (0, _slicedToArray2.default)(_useState, 2),\n       asyncVisible = _useState2[0],\n       setAsyncVisible = _useState2[1];\n\n   var _useState3 = (0, _useState7.default)(_interface.STATUS_NONE),\n       _useState4 = (0, _slicedToArray2.default)(_useState3, 2),\n       status = _useState4[0],\n       setStatus = _useState4[1];\n\n   var _useState5 = (0, _useState7.default)(null),\n       _useState6 = (0, _slicedToArray2.default)(_useState5, 2),\n       style = _useState6[0],\n       setStyle = _useState6[1];\n\n   var mountedRef = (0, React.useRef)(false);\n   var deadlineRef = (0, React.useRef)(null); // =========================== Dom Node ===========================\n\n   function getDomElement() {\n     return getElement();\n   } // ========================== Motion End ==========================\n\n\n   var activeRef = (0, React.useRef)(false);\n\n   function onInternalMotionEnd(event) {\n     var element = getDomElement();\n\n     if (event && !event.deadline && event.target !== element) {\n       // event exists\n       // not initiated by deadline\n       // transitionEnd not fired by inner elements\n       return;\n     }\n\n     var currentActive = activeRef.current;\n     var canEnd;\n\n     if (status === _interface.STATUS_APPEAR && currentActive) {\n       canEnd = onAppearEnd === null || onAppearEnd === void 0 ? void 0 : onAppearEnd(element, event);\n     } else if (status === _interface.STATUS_ENTER && currentActive) {\n       canEnd = onEnterEnd === null || onEnterEnd === void 0 ? void 0 : onEnterEnd(element, event);\n     } else if (status === _interface.STATUS_LEAVE && currentActive) {\n       canEnd = onLeaveEnd === null || onLeaveEnd === void 0 ? void 0 : onLeaveEnd(element, event);\n     } // Only update status when `canEnd` and not destroyed\n\n\n     if (status !== _interface.STATUS_NONE && currentActive && canEnd !== false) {\n       setStatus(_interface.STATUS_NONE, true);\n       setStyle(null, true);\n     }\n   }\n\n   var _useDomMotionEvents = (0, _useDomMotionEvents3.default)(onInternalMotionEnd),\n       _useDomMotionEvents2 = (0, _slicedToArray2.default)(_useDomMotionEvents, 1),\n       patchMotionEvents = _useDomMotionEvents2[0]; // ============================= Step =============================\n\n\n   var eventHandlers = React.useMemo(function () {\n     var _ref2, _ref3, _ref4;\n\n     switch (status) {\n       case _interface.STATUS_APPEAR:\n         return _ref2 = {}, (0, _defineProperty2.default)(_ref2, _interface.STEP_PREPARE, onAppearPrepare), (0, _defineProperty2.default)(_ref2, _interface.STEP_START, onAppearStart), (0, _defineProperty2.default)(_ref2, _interface.STEP_ACTIVE, onAppearActive), _ref2;\n\n       case _interface.STATUS_ENTER:\n         return _ref3 = {}, (0, _defineProperty2.default)(_ref3, _interface.STEP_PREPARE, onEnterPrepare), (0, _defineProperty2.default)(_ref3, _interface.STEP_START, onEnterStart), (0, _defineProperty2.default)(_ref3, _interface.STEP_ACTIVE, onEnterActive), _ref3;\n\n       case _interface.STATUS_LEAVE:\n         return _ref4 = {}, (0, _defineProperty2.default)(_ref4, _interface.STEP_PREPARE, onLeavePrepare), (0, _defineProperty2.default)(_ref4, _interface.STEP_START, onLeaveStart), (0, _defineProperty2.default)(_ref4, _interface.STEP_ACTIVE, onLeaveActive), _ref4;\n\n       default:\n         return {};\n     }\n   }, [status]);\n\n   var _useStepQueue = (0, _useStepQueue3.default)(status, function (newStep) {\n     // Only prepare step can be skip\n     if (newStep === _interface.STEP_PREPARE) {\n       var onPrepare = eventHandlers[_interface.STEP_PREPARE];\n\n       if (!onPrepare) {\n         return _useStepQueue3.SkipStep;\n       }\n\n       return onPrepare(getDomElement());\n     } // Rest step is sync update\n\n\n     if (step in eventHandlers) {\n       var _eventHandlers$step;\n\n       setStyle(((_eventHandlers$step = eventHandlers[step]) === null || _eventHandlers$step === void 0 ? void 0 : _eventHandlers$step.call(eventHandlers, getDomElement(), null)) || null);\n     }\n\n     if (step === _interface.STEP_ACTIVE) {\n       // Patch events when motion needed\n       patchMotionEvents(getDomElement());\n\n       if (motionDeadline > 0) {\n         clearTimeout(deadlineRef.current);\n         deadlineRef.current = setTimeout(function () {\n           onInternalMotionEnd({\n             deadline: true\n           });\n         }, motionDeadline);\n       }\n     }\n\n     return _useStepQueue3.DoStep;\n   }),\n       _useStepQueue2 = (0, _slicedToArray2.default)(_useStepQueue, 2),\n       startStep = _useStepQueue2[0],\n       step = _useStepQueue2[1];\n\n   var active = (0, _useStepQueue3.isActive)(step);\n   activeRef.current = active; // ============================ Status ============================\n   // Update with new status\n\n   (0, _useIsomorphicLayoutEffect.default)(function () {\n     setAsyncVisible(visible);\n     var isMounted = mountedRef.current;\n     mountedRef.current = true;\n\n     if (!supportMotion) {\n       return;\n     }\n\n     var nextStatus; // Appear\n\n     if (!isMounted && visible && motionAppear) {\n       nextStatus = _interface.STATUS_APPEAR;\n     } // Enter\n\n\n     if (isMounted && visible && motionEnter) {\n       nextStatus = _interface.STATUS_ENTER;\n     } // Leave\n\n\n     if (isMounted && !visible && motionLeave || !isMounted && motionLeaveImmediately && !visible && motionLeave) {\n       nextStatus = _interface.STATUS_LEAVE;\n     } // Update to next status\n\n\n     if (nextStatus) {\n       setStatus(nextStatus);\n       startStep();\n     }\n   }, [visible]); // ============================ Effect ============================\n   // Reset when motion changed\n\n   (0, React.useEffect)(function () {\n     if ( // Cancel appear\n     status === _interface.STATUS_APPEAR && !motionAppear || // Cancel enter\n     status === _interface.STATUS_ENTER && !motionEnter || // Cancel leave\n     status === _interface.STATUS_LEAVE && !motionLeave) {\n       setStatus(_interface.STATUS_NONE);\n     }\n   }, [motionAppear, motionEnter, motionLeave]);\n   (0, React.useEffect)(function () {\n     return function () {\n       mountedRef.current = false;\n       clearTimeout(deadlineRef.current);\n     };\n   }, []); // Trigger `onVisibleChanged`\n\n   var firstMountChangeRef = React.useRef(false);\n   (0, React.useEffect)(function () {\n     // [visible & motion not end] => [!visible & motion end] still need trigger onVisibleChanged\n     if (asyncVisible) {\n       firstMountChangeRef.current = true;\n     }\n\n     if (asyncVisible !== undefined && status === _interface.STATUS_NONE) {\n       // Skip first render is invisible since it's nothing changed\n       if (firstMountChangeRef.current || asyncVisible) {\n         onVisibleChanged === null || onVisibleChanged === void 0 ? void 0 : onVisibleChanged(asyncVisible);\n       }\n\n       firstMountChangeRef.current = true;\n     }\n   }, [asyncVisible, status]); // ============================ Styles ============================\n\n   var mergedStyle = style;\n\n   if (eventHandlers[_interface.STEP_PREPARE] && step === _interface.STEP_START) {\n     mergedStyle = (0, _objectSpread2.default)({\n       transition: 'none'\n     }, mergedStyle);\n   }\n\n   return [status, step, mergedStyle, asyncVisible !== null && asyncVisible !== void 0 ? asyncVisible : visible];\n }\n\n// #endregion ORIGINAL CODE\n\n_cjsExports = module.exports;\n___esModule = module.exports.__esModule;\n_default = module.exports.default;\n\n}, () => ({\n  '@babel/runtime/helpers/interopRequireDefault': _req,\n  '@babel/runtime/helpers/typeof': _req0,\n  '@babel/runtime/helpers/objectSpread2': _req1,\n  '@babel/runtime/helpers/defineProperty': _req2,\n  '@babel/runtime/helpers/slicedToArray': _req3,\n  'react': _req4,\n  'rc-util/lib/hooks/useState': _req5,\n  '../interface': _req6,\n  './useStepQueue': _req7,\n  './useDomMotionEvents': _req8,\n  './useIsomorphicLayoutEffect': _req9,\n}));\nexport { _cjsExports as default };\nexport { __cjsMetaURL }\n"]}