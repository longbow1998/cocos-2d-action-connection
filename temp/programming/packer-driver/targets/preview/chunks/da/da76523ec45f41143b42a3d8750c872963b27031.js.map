{"version":3,"sources":["file:///Users/longbow/node_modules/rc-field-form/lib/useForm.js"],"names":["_cjsLoader","_req","__cjsMetaURL","_req0","_req1","_req2","_req3","_req4","_req5","_req6","_req7","_req8","_req9","_req10","_req11","_req12","_req13","_req14","url","define","exports","require","module","__filename","__dirname","_interopRequireDefault","default","_interopRequireWildcard","Object","defineProperty","value","FormStore","_slicedToArray2","_objectSpread2","_objectWithoutProperties2","_toConsumableArray2","_createClass2","_classCallCheck2","_warning","React","_FieldContext","_asyncUtil","_cloneDeep","_messages","_NameMap","_valueUtil","_excluded","forceRootUpdate","_this","formHooked","subscribable","store","fieldEntities","initialValues","callbacks","validateMessages","preserve","lastValidatePromise","getForm","getFieldValue","getFieldsValue","getFieldError","getFieldWarning","getFieldsError","isFieldsTouched","isFieldTouched","isFieldValidating","isFieldsValidating","resetFields","setFields","setFieldValue","setFieldsValue","validateFields","submit","_init","getInternalHooks","key","HOOK_MARK","dispatch","initEntityValue","registerField","useSubscribe","setInitialValues","destroyForm","setCallbacks","setValidateMessages","getFields","setPreserve","getInitialValue","registerWatch","prevWithoutPreserves","init","_this$prevWithoutPres","nextStore","setValues","map","_ref","namePath","setValue","getValue","updateStore","getFieldEntities","forEach","entity","isMergedPreserve","isPreserve","set","getNamePath","initValue","length","watchList","callback","push","filter","fn","notifyWatch","arguments","undefined","values","timeoutId","warningUnhooked","process","env","NODE_ENV","window","setTimeout","pure","field","getFieldsMap","cache","getFieldEntitiesForNamePathList","nameList","name","get","INVALIDATE_NAME_PATH","filterFunc","Array","isArray","filteredNameList","_entity$isListField","isListField","call","meta","getMeta","cloneByNamePathList","index","errors","getErrors","warnings","getWarnings","fieldError","_len","args","_key","arg0","arg1","namePathList","isAllFieldsTouched","every","some","shortNamePath","fieldNamePath","nameUnit","i","update","list","concat","isNamePathListTouched","entities","namePathListEntities","_ref2","testField","containsNamePath","resetWithFieldInitialValue","info","initialValue","props","records","Set","add","resetWithFields","formInitialValue","join","size","originValue","skipExist","requiredFieldEntities","_requiredFieldEntitie","apply","r","prevStore","notifyObservers","type","fields","fieldData","data","prevValue","fieldPreserve","mergedPreserve","source","subNamePath","item","defaultValue","matchNamePath","_prevStore","triggerDependenciesUpdate","action","updateValue","_namePath","triggerName","mergedInfo","_ref3","onStoreChange","childrenFields","getDependencyChildrenFields","relatedFields","onValuesChange","changedValues","triggerOnFieldsChange","rootNamePath","children","dependencies2fields","dependencies","dependency","dependencyNamePath","fillChildren","has","isFieldDirty","filedErrors","onFieldsChange","_ref4","changedFields","_ref5","fieldName","options","provideNameList","promiseList","recursive","rules","promise","validateRules","defaultValidateMessages","then","catch","ruleErrors","_ruleErrors$forEach","mergedErrors","mergedWarnings","_ref6","warningOnly","rule","Promise","reject","summaryPromise","allPromiseFinish","results","resultNamePathList","_ref7","returnPromise","resolve","errorList","result","errorFields","outOfDate","e","onFinish","err","console","error","onFinishFailed","useForm","form","formRef","useRef","_React$useState","useState","_React$useState2","forceUpdate","current","forceReRender","formStore","_default","_cjsExports","___esModule","__esModule","_default0","_FormStore"],"mappings":"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","sourcesContent":["import _cjsLoader from 'cce:/internal/ml/cjs-loader.mjs';\nimport { __cjsMetaURL as _req} from '@babel/runtime/helpers/interopRequireDefault';\nimport { __cjsMetaURL as _req0} from '@babel/runtime/helpers/interopRequireWildcard';\nimport { __cjsMetaURL as _req1} from '@babel/runtime/helpers/slicedToArray';\nimport { __cjsMetaURL as _req2} from '@babel/runtime/helpers/objectSpread2';\nimport { __cjsMetaURL as _req3} from '@babel/runtime/helpers/objectWithoutProperties';\nimport { __cjsMetaURL as _req4} from '@babel/runtime/helpers/toConsumableArray';\nimport { __cjsMetaURL as _req5} from '@babel/runtime/helpers/createClass';\nimport { __cjsMetaURL as _req6} from '@babel/runtime/helpers/classCallCheck';\nimport { __cjsMetaURL as _req7} from 'rc-util/lib/warning';\nimport { __cjsMetaURL as _req8} from 'react';\nimport { __cjsMetaURL as _req9} from './FieldContext';\nimport { __cjsMetaURL as _req10} from './utils/asyncUtil';\nimport { __cjsMetaURL as _req11} from './utils/cloneDeep';\nimport { __cjsMetaURL as _req12} from './utils/messages';\nimport { __cjsMetaURL as _req13} from './utils/NameMap';\nimport { __cjsMetaURL as _req14} from './utils/valueUtil';\nlet _cjsExports;\nlet ___esModule;\nlet _default0;\nlet _FormStore;\nconst __cjsMetaURL = import.meta.url;\n_cjsLoader.define(__cjsMetaURL, function (exports, require, module, __filename, __dirname) {\n// #region ORIGINAL CODE\n\n\n \"use strict\";\n\n var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\").default;\n var _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\").default;\n Object.defineProperty(exports, \"__esModule\", {\n   value: true\n });\n exports.default = exports.FormStore = void 0;\n var _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n var _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread2\"));\n var _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n var _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\n var _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n var _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n var _warning = _interopRequireDefault(require(\"rc-util/lib/warning\"));\n var React = _interopRequireWildcard(require(\"react\"));\n var _FieldContext = require(\"./FieldContext\");\n var _asyncUtil = require(\"./utils/asyncUtil\");\n var _cloneDeep = _interopRequireDefault(require(\"./utils/cloneDeep\"));\n var _messages = require(\"./utils/messages\");\n var _NameMap = _interopRequireDefault(require(\"./utils/NameMap\"));\n var _valueUtil = require(\"./utils/valueUtil\");\n var _excluded = [\"name\", \"errors\"];\n var FormStore = /*#__PURE__*/(0, _createClass2.default)(function FormStore(forceRootUpdate) {\n   var _this = this;\n   (0, _classCallCheck2.default)(this, FormStore);\n   this.formHooked = false;\n   this.forceRootUpdate = void 0;\n   this.subscribable = true;\n   this.store = {};\n   this.fieldEntities = [];\n   this.initialValues = {};\n   this.callbacks = {};\n   this.validateMessages = null;\n   this.preserve = null;\n   this.lastValidatePromise = null;\n   this.getForm = function () {\n     return {\n       getFieldValue: _this.getFieldValue,\n       getFieldsValue: _this.getFieldsValue,\n       getFieldError: _this.getFieldError,\n       getFieldWarning: _this.getFieldWarning,\n       getFieldsError: _this.getFieldsError,\n       isFieldsTouched: _this.isFieldsTouched,\n       isFieldTouched: _this.isFieldTouched,\n       isFieldValidating: _this.isFieldValidating,\n       isFieldsValidating: _this.isFieldsValidating,\n       resetFields: _this.resetFields,\n       setFields: _this.setFields,\n       setFieldValue: _this.setFieldValue,\n       setFieldsValue: _this.setFieldsValue,\n       validateFields: _this.validateFields,\n       submit: _this.submit,\n       _init: true,\n       getInternalHooks: _this.getInternalHooks\n     };\n   };\n   this.getInternalHooks = function (key) {\n     if (key === _FieldContext.HOOK_MARK) {\n       _this.formHooked = true;\n       return {\n         dispatch: _this.dispatch,\n         initEntityValue: _this.initEntityValue,\n         registerField: _this.registerField,\n         useSubscribe: _this.useSubscribe,\n         setInitialValues: _this.setInitialValues,\n         destroyForm: _this.destroyForm,\n         setCallbacks: _this.setCallbacks,\n         setValidateMessages: _this.setValidateMessages,\n         getFields: _this.getFields,\n         setPreserve: _this.setPreserve,\n         getInitialValue: _this.getInitialValue,\n         registerWatch: _this.registerWatch\n       };\n     }\n     (0, _warning.default)(false, '`getInternalHooks` is internal usage. Should not call directly.');\n     return null;\n   };\n   this.useSubscribe = function (subscribable) {\n     _this.subscribable = subscribable;\n   };\n   this.prevWithoutPreserves = null;\n   this.setInitialValues = function (initialValues, init) {\n     _this.initialValues = initialValues || {};\n     if (init) {\n       var _this$prevWithoutPres;\n       var nextStore = (0, _valueUtil.setValues)({}, initialValues, _this.store);\n       // We will take consider prev form unmount fields.\n       // When the field is not `preserve`, we need fill this with initialValues instead of store.\n       // eslint-disable-next-line array-callback-return\n       (_this$prevWithoutPres = _this.prevWithoutPreserves) === null || _this$prevWithoutPres === void 0 ? void 0 : _this$prevWithoutPres.map(function (_ref) {\n         var namePath = _ref.key;\n         nextStore = (0, _valueUtil.setValue)(nextStore, namePath, (0, _valueUtil.getValue)(initialValues, namePath));\n       });\n       _this.prevWithoutPreserves = null;\n       _this.updateStore(nextStore);\n     }\n   };\n   this.destroyForm = function () {\n     var prevWithoutPreserves = new _NameMap.default();\n     _this.getFieldEntities(true).forEach(function (entity) {\n       if (!_this.isMergedPreserve(entity.isPreserve())) {\n         prevWithoutPreserves.set(entity.getNamePath(), true);\n       }\n     });\n     _this.prevWithoutPreserves = prevWithoutPreserves;\n   };\n   this.getInitialValue = function (namePath) {\n     var initValue = (0, _valueUtil.getValue)(_this.initialValues, namePath);\n     // Not cloneDeep when without `namePath`\n     return namePath.length ? (0, _cloneDeep.default)(initValue) : initValue;\n   };\n   this.setCallbacks = function (callbacks) {\n     _this.callbacks = callbacks;\n   };\n   this.setValidateMessages = function (validateMessages) {\n     _this.validateMessages = validateMessages;\n   };\n   this.setPreserve = function (preserve) {\n     _this.preserve = preserve;\n   };\n   this.watchList = [];\n   this.registerWatch = function (callback) {\n     _this.watchList.push(callback);\n     return function () {\n       _this.watchList = _this.watchList.filter(function (fn) {\n         return fn !== callback;\n       });\n     };\n   };\n   this.notifyWatch = function () {\n     var namePath = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n     // No need to cost perf when nothing need to watch\n     if (_this.watchList.length) {\n       var values = _this.getFieldsValue();\n       _this.watchList.forEach(function (callback) {\n         callback(values, namePath);\n       });\n     }\n   };\n   this.timeoutId = null;\n   this.warningUnhooked = function () {\n     if (process.env.NODE_ENV !== 'production' && !_this.timeoutId && typeof window !== 'undefined') {\n       _this.timeoutId = setTimeout(function () {\n         _this.timeoutId = null;\n         if (!_this.formHooked) {\n           (0, _warning.default)(false, 'Instance created by `useForm` is not connected to any Form element. Forget to pass `form` prop?');\n         }\n       });\n     }\n   };\n   this.updateStore = function (nextStore) {\n     _this.store = nextStore;\n   };\n   this.getFieldEntities = function () {\n     var pure = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n     if (!pure) {\n       return _this.fieldEntities;\n     }\n     return _this.fieldEntities.filter(function (field) {\n       return field.getNamePath().length;\n     });\n   };\n   this.getFieldsMap = function () {\n     var pure = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n     var cache = new _NameMap.default();\n     _this.getFieldEntities(pure).forEach(function (field) {\n       var namePath = field.getNamePath();\n       cache.set(namePath, field);\n     });\n     return cache;\n   };\n   this.getFieldEntitiesForNamePathList = function (nameList) {\n     if (!nameList) {\n       return _this.getFieldEntities(true);\n     }\n     var cache = _this.getFieldsMap(true);\n     return nameList.map(function (name) {\n       var namePath = (0, _valueUtil.getNamePath)(name);\n       return cache.get(namePath) || {\n         INVALIDATE_NAME_PATH: (0, _valueUtil.getNamePath)(name)\n       };\n     });\n   };\n   this.getFieldsValue = function (nameList, filterFunc) {\n     _this.warningUnhooked();\n     if (nameList === true && !filterFunc) {\n       return _this.store;\n     }\n     var fieldEntities = _this.getFieldEntitiesForNamePathList(Array.isArray(nameList) ? nameList : null);\n     var filteredNameList = [];\n     fieldEntities.forEach(function (entity) {\n       var _entity$isListField;\n       var namePath = 'INVALIDATE_NAME_PATH' in entity ? entity.INVALIDATE_NAME_PATH : entity.getNamePath();\n       // Ignore when it's a list item and not specific the namePath,\n       // since parent field is already take in count\n       if (!nameList && ((_entity$isListField = entity.isListField) === null || _entity$isListField === void 0 ? void 0 : _entity$isListField.call(entity))) {\n         return;\n       }\n       if (!filterFunc) {\n         filteredNameList.push(namePath);\n       } else {\n         var meta = 'getMeta' in entity ? entity.getMeta() : null;\n         if (filterFunc(meta)) {\n           filteredNameList.push(namePath);\n         }\n       }\n     });\n     return (0, _valueUtil.cloneByNamePathList)(_this.store, filteredNameList.map(_valueUtil.getNamePath));\n   };\n   this.getFieldValue = function (name) {\n     _this.warningUnhooked();\n     var namePath = (0, _valueUtil.getNamePath)(name);\n     return (0, _valueUtil.getValue)(_this.store, namePath);\n   };\n   this.getFieldsError = function (nameList) {\n     _this.warningUnhooked();\n     var fieldEntities = _this.getFieldEntitiesForNamePathList(nameList);\n     return fieldEntities.map(function (entity, index) {\n       if (entity && !('INVALIDATE_NAME_PATH' in entity)) {\n         return {\n           name: entity.getNamePath(),\n           errors: entity.getErrors(),\n           warnings: entity.getWarnings()\n         };\n       }\n       return {\n         name: (0, _valueUtil.getNamePath)(nameList[index]),\n         errors: [],\n         warnings: []\n       };\n     });\n   };\n   this.getFieldError = function (name) {\n     _this.warningUnhooked();\n     var namePath = (0, _valueUtil.getNamePath)(name);\n     var fieldError = _this.getFieldsError([namePath])[0];\n     return fieldError.errors;\n   };\n   this.getFieldWarning = function (name) {\n     _this.warningUnhooked();\n     var namePath = (0, _valueUtil.getNamePath)(name);\n     var fieldError = _this.getFieldsError([namePath])[0];\n     return fieldError.warnings;\n   };\n   this.isFieldsTouched = function () {\n     _this.warningUnhooked();\n     for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n       args[_key] = arguments[_key];\n     }\n     var arg0 = args[0],\n       arg1 = args[1];\n     var namePathList;\n     var isAllFieldsTouched = false;\n     if (args.length === 0) {\n       namePathList = null;\n     } else if (args.length === 1) {\n       if (Array.isArray(arg0)) {\n         namePathList = arg0.map(_valueUtil.getNamePath);\n         isAllFieldsTouched = false;\n       } else {\n         namePathList = null;\n         isAllFieldsTouched = arg0;\n       }\n     } else {\n       namePathList = arg0.map(_valueUtil.getNamePath);\n       isAllFieldsTouched = arg1;\n     }\n     var fieldEntities = _this.getFieldEntities(true);\n     var isFieldTouched = function isFieldTouched(field) {\n       return field.isFieldTouched();\n     };\n     // ===== Will get fully compare when not config namePathList =====\n     if (!namePathList) {\n       return isAllFieldsTouched ? fieldEntities.every(isFieldTouched) : fieldEntities.some(isFieldTouched);\n     }\n     // Generate a nest tree for validate\n     var map = new _NameMap.default();\n     namePathList.forEach(function (shortNamePath) {\n       map.set(shortNamePath, []);\n     });\n     fieldEntities.forEach(function (field) {\n       var fieldNamePath = field.getNamePath();\n       // Find matched entity and put into list\n       namePathList.forEach(function (shortNamePath) {\n         if (shortNamePath.every(function (nameUnit, i) {\n           return fieldNamePath[i] === nameUnit;\n         })) {\n           map.update(shortNamePath, function (list) {\n             return [].concat((0, _toConsumableArray2.default)(list), [field]);\n           });\n         }\n       });\n     });\n     // Check if NameMap value is touched\n     var isNamePathListTouched = function isNamePathListTouched(entities) {\n       return entities.some(isFieldTouched);\n     };\n     var namePathListEntities = map.map(function (_ref2) {\n       var value = _ref2.value;\n       return value;\n     });\n     return isAllFieldsTouched ? namePathListEntities.every(isNamePathListTouched) : namePathListEntities.some(isNamePathListTouched);\n   };\n   this.isFieldTouched = function (name) {\n     _this.warningUnhooked();\n     return _this.isFieldsTouched([name]);\n   };\n   this.isFieldsValidating = function (nameList) {\n     _this.warningUnhooked();\n     var fieldEntities = _this.getFieldEntities();\n     if (!nameList) {\n       return fieldEntities.some(function (testField) {\n         return testField.isFieldValidating();\n       });\n     }\n     var namePathList = nameList.map(_valueUtil.getNamePath);\n     return fieldEntities.some(function (testField) {\n       var fieldNamePath = testField.getNamePath();\n       return (0, _valueUtil.containsNamePath)(namePathList, fieldNamePath) && testField.isFieldValidating();\n     });\n   };\n   this.isFieldValidating = function (name) {\n     _this.warningUnhooked();\n     return _this.isFieldsValidating([name]);\n   };\n   this.resetWithFieldInitialValue = function () {\n     var info = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n     // Create cache\n     var cache = new _NameMap.default();\n     var fieldEntities = _this.getFieldEntities(true);\n     fieldEntities.forEach(function (field) {\n       var initialValue = field.props.initialValue;\n       var namePath = field.getNamePath();\n       // Record only if has `initialValue`\n       if (initialValue !== undefined) {\n         var records = cache.get(namePath) || new Set();\n         records.add({\n           entity: field,\n           value: initialValue\n         });\n         cache.set(namePath, records);\n       }\n     });\n     // Reset\n     var resetWithFields = function resetWithFields(entities) {\n       entities.forEach(function (field) {\n         var initialValue = field.props.initialValue;\n         if (initialValue !== undefined) {\n           var namePath = field.getNamePath();\n           var formInitialValue = _this.getInitialValue(namePath);\n           if (formInitialValue !== undefined) {\n             // Warning if conflict with form initialValues and do not modify value\n             (0, _warning.default)(false, \"Form already set 'initialValues' with path '\".concat(namePath.join('.'), \"'. Field can not overwrite it.\"));\n           } else {\n             var records = cache.get(namePath);\n             if (records && records.size > 1) {\n               // Warning if multiple field set `initialValue`and do not modify value\n               (0, _warning.default)(false, \"Multiple Field with path '\".concat(namePath.join('.'), \"' set 'initialValue'. Can not decide which one to pick.\"));\n             } else if (records) {\n               var originValue = _this.getFieldValue(namePath);\n               // Set `initialValue`\n               if (!info.skipExist || originValue === undefined) {\n                 _this.updateStore((0, _valueUtil.setValue)(_this.store, namePath, (0, _toConsumableArray2.default)(records)[0].value));\n               }\n             }\n           }\n         }\n       });\n     };\n     var requiredFieldEntities;\n     if (info.entities) {\n       requiredFieldEntities = info.entities;\n     } else if (info.namePathList) {\n       requiredFieldEntities = [];\n       info.namePathList.forEach(function (namePath) {\n         var records = cache.get(namePath);\n         if (records) {\n           var _requiredFieldEntitie;\n           (_requiredFieldEntitie = requiredFieldEntities).push.apply(_requiredFieldEntitie, (0, _toConsumableArray2.default)((0, _toConsumableArray2.default)(records).map(function (r) {\n             return r.entity;\n           })));\n         }\n       });\n     } else {\n       requiredFieldEntities = fieldEntities;\n     }\n     resetWithFields(requiredFieldEntities);\n   };\n   this.resetFields = function (nameList) {\n     _this.warningUnhooked();\n     var prevStore = _this.store;\n     if (!nameList) {\n       _this.updateStore((0, _valueUtil.setValues)({}, _this.initialValues));\n       _this.resetWithFieldInitialValue();\n       _this.notifyObservers(prevStore, null, {\n         type: 'reset'\n       });\n       _this.notifyWatch();\n       return;\n     }\n     // Reset by `nameList`\n     var namePathList = nameList.map(_valueUtil.getNamePath);\n     namePathList.forEach(function (namePath) {\n       var initialValue = _this.getInitialValue(namePath);\n       _this.updateStore((0, _valueUtil.setValue)(_this.store, namePath, initialValue));\n     });\n     _this.resetWithFieldInitialValue({\n       namePathList: namePathList\n     });\n     _this.notifyObservers(prevStore, namePathList, {\n       type: 'reset'\n     });\n     _this.notifyWatch(namePathList);\n   };\n   this.setFields = function (fields) {\n     _this.warningUnhooked();\n     var prevStore = _this.store;\n     var namePathList = [];\n     fields.forEach(function (fieldData) {\n       var name = fieldData.name,\n         errors = fieldData.errors,\n         data = (0, _objectWithoutProperties2.default)(fieldData, _excluded);\n       var namePath = (0, _valueUtil.getNamePath)(name);\n       namePathList.push(namePath);\n       // Value\n       if ('value' in data) {\n         _this.updateStore((0, _valueUtil.setValue)(_this.store, namePath, data.value));\n       }\n       _this.notifyObservers(prevStore, [namePath], {\n         type: 'setField',\n         data: fieldData\n       });\n     });\n     _this.notifyWatch(namePathList);\n   };\n   this.getFields = function () {\n     var entities = _this.getFieldEntities(true);\n     var fields = entities.map(function (field) {\n       var namePath = field.getNamePath();\n       var meta = field.getMeta();\n       var fieldData = (0, _objectSpread2.default)((0, _objectSpread2.default)({}, meta), {}, {\n         name: namePath,\n         value: _this.getFieldValue(namePath)\n       });\n       Object.defineProperty(fieldData, 'originRCField', {\n         value: true\n       });\n       return fieldData;\n     });\n     return fields;\n   };\n   this.initEntityValue = function (entity) {\n     var initialValue = entity.props.initialValue;\n     if (initialValue !== undefined) {\n       var namePath = entity.getNamePath();\n       var prevValue = (0, _valueUtil.getValue)(_this.store, namePath);\n       if (prevValue === undefined) {\n         _this.updateStore((0, _valueUtil.setValue)(_this.store, namePath, initialValue));\n       }\n     }\n   };\n   this.isMergedPreserve = function (fieldPreserve) {\n     var mergedPreserve = fieldPreserve !== undefined ? fieldPreserve : _this.preserve;\n     return mergedPreserve !== null && mergedPreserve !== void 0 ? mergedPreserve : true;\n   };\n   this.registerField = function (entity) {\n     _this.fieldEntities.push(entity);\n     var namePath = entity.getNamePath();\n     _this.notifyWatch([namePath]);\n     // Set initial values\n     if (entity.props.initialValue !== undefined) {\n       var prevStore = _this.store;\n       _this.resetWithFieldInitialValue({\n         entities: [entity],\n         skipExist: true\n       });\n       _this.notifyObservers(prevStore, [entity.getNamePath()], {\n         type: 'valueUpdate',\n         source: 'internal'\n       });\n     }\n     // un-register field callback\n     return function (isListField, preserve) {\n       var subNamePath = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n       _this.fieldEntities = _this.fieldEntities.filter(function (item) {\n         return item !== entity;\n       });\n       // Clean up store value if not preserve\n       if (!_this.isMergedPreserve(preserve) && (!isListField || subNamePath.length > 1)) {\n         var defaultValue = isListField ? undefined : _this.getInitialValue(namePath);\n         if (namePath.length && _this.getFieldValue(namePath) !== defaultValue && _this.fieldEntities.every(function (field) {\n           return (\n             // Only reset when no namePath exist\n             !(0, _valueUtil.matchNamePath)(field.getNamePath(), namePath)\n           );\n         })) {\n           var _prevStore = _this.store;\n           _this.updateStore((0, _valueUtil.setValue)(_prevStore, namePath, defaultValue, true));\n           // Notify that field is unmount\n           _this.notifyObservers(_prevStore, [namePath], {\n             type: 'remove'\n           });\n           // Dependencies update\n           _this.triggerDependenciesUpdate(_prevStore, namePath);\n         }\n       }\n       _this.notifyWatch([namePath]);\n     };\n   };\n   this.dispatch = function (action) {\n     switch (action.type) {\n       case 'updateValue':\n         {\n           var namePath = action.namePath,\n             value = action.value;\n           _this.updateValue(namePath, value);\n           break;\n         }\n       case 'validateField':\n         {\n           var _namePath = action.namePath,\n             triggerName = action.triggerName;\n           _this.validateFields([_namePath], {\n             triggerName: triggerName\n           });\n           break;\n         }\n       default:\n       // Currently we don't have other action. Do nothing.\n     }\n   };\n   this.notifyObservers = function (prevStore, namePathList, info) {\n     if (_this.subscribable) {\n       var mergedInfo = (0, _objectSpread2.default)((0, _objectSpread2.default)({}, info), {}, {\n         store: _this.getFieldsValue(true)\n       });\n       _this.getFieldEntities().forEach(function (_ref3) {\n         var onStoreChange = _ref3.onStoreChange;\n         onStoreChange(prevStore, namePathList, mergedInfo);\n       });\n     } else {\n       _this.forceRootUpdate();\n     }\n   };\n   this.triggerDependenciesUpdate = function (prevStore, namePath) {\n     var childrenFields = _this.getDependencyChildrenFields(namePath);\n     if (childrenFields.length) {\n       _this.validateFields(childrenFields);\n     }\n     _this.notifyObservers(prevStore, childrenFields, {\n       type: 'dependenciesUpdate',\n       relatedFields: [namePath].concat((0, _toConsumableArray2.default)(childrenFields))\n     });\n     return childrenFields;\n   };\n   this.updateValue = function (name, value) {\n     var namePath = (0, _valueUtil.getNamePath)(name);\n     var prevStore = _this.store;\n     _this.updateStore((0, _valueUtil.setValue)(_this.store, namePath, value));\n     _this.notifyObservers(prevStore, [namePath], {\n       type: 'valueUpdate',\n       source: 'internal'\n     });\n     _this.notifyWatch([namePath]);\n     // Dependencies update\n     var childrenFields = _this.triggerDependenciesUpdate(prevStore, namePath);\n     // trigger callback function\n     var onValuesChange = _this.callbacks.onValuesChange;\n     if (onValuesChange) {\n       var changedValues = (0, _valueUtil.cloneByNamePathList)(_this.store, [namePath]);\n       onValuesChange(changedValues, _this.getFieldsValue());\n     }\n     _this.triggerOnFieldsChange([namePath].concat((0, _toConsumableArray2.default)(childrenFields)));\n   };\n   this.setFieldsValue = function (store) {\n     _this.warningUnhooked();\n     var prevStore = _this.store;\n     if (store) {\n       var nextStore = (0, _valueUtil.setValues)(_this.store, store);\n       _this.updateStore(nextStore);\n     }\n     _this.notifyObservers(prevStore, null, {\n       type: 'valueUpdate',\n       source: 'external'\n     });\n     _this.notifyWatch();\n   };\n   this.setFieldValue = function (name, value) {\n     _this.setFields([{\n       name: name,\n       value: value\n     }]);\n   };\n   this.getDependencyChildrenFields = function (rootNamePath) {\n     var children = new Set();\n     var childrenFields = [];\n     var dependencies2fields = new _NameMap.default();\n     /**\n      * Generate maps\n      * Can use cache to save perf if user report performance issue with this\n      */\n     _this.getFieldEntities().forEach(function (field) {\n       var dependencies = field.props.dependencies;\n       (dependencies || []).forEach(function (dependency) {\n         var dependencyNamePath = (0, _valueUtil.getNamePath)(dependency);\n         dependencies2fields.update(dependencyNamePath, function () {\n           var fields = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : new Set();\n           fields.add(field);\n           return fields;\n         });\n       });\n     });\n     var fillChildren = function fillChildren(namePath) {\n       var fields = dependencies2fields.get(namePath) || new Set();\n       fields.forEach(function (field) {\n         if (!children.has(field)) {\n           children.add(field);\n           var fieldNamePath = field.getNamePath();\n           if (field.isFieldDirty() && fieldNamePath.length) {\n             childrenFields.push(fieldNamePath);\n             fillChildren(fieldNamePath);\n           }\n         }\n       });\n     };\n     fillChildren(rootNamePath);\n     return childrenFields;\n   };\n   this.triggerOnFieldsChange = function (namePathList, filedErrors) {\n     var onFieldsChange = _this.callbacks.onFieldsChange;\n     if (onFieldsChange) {\n       var fields = _this.getFields();\n       /**\n        * Fill errors since `fields` may be replaced by controlled fields\n        */\n       if (filedErrors) {\n         var cache = new _NameMap.default();\n         filedErrors.forEach(function (_ref4) {\n           var name = _ref4.name,\n             errors = _ref4.errors;\n           cache.set(name, errors);\n         });\n         fields.forEach(function (field) {\n           // eslint-disable-next-line no-param-reassign\n           field.errors = cache.get(field.name) || field.errors;\n         });\n       }\n       var changedFields = fields.filter(function (_ref5) {\n         var fieldName = _ref5.name;\n         return (0, _valueUtil.containsNamePath)(namePathList, fieldName);\n       });\n       onFieldsChange(changedFields, fields);\n     }\n   };\n   this.validateFields = function (nameList, options) {\n     _this.warningUnhooked();\n     var provideNameList = !!nameList;\n     var namePathList = provideNameList ? nameList.map(_valueUtil.getNamePath) : [];\n     // Collect result in promise list\n     var promiseList = [];\n     _this.getFieldEntities(true).forEach(function (field) {\n       // Add field if not provide `nameList`\n       if (!provideNameList) {\n         namePathList.push(field.getNamePath());\n       }\n       /**\n        * Recursive validate if configured.\n        * TODO: perf improvement @zombieJ\n        */\n       if ((options === null || options === void 0 ? void 0 : options.recursive) && provideNameList) {\n         var namePath = field.getNamePath();\n         if (\n         // nameList[i] === undefined  nameList \n         // ['name'] -> ['name','list']\n         namePath.every(function (nameUnit, i) {\n           return nameList[i] === nameUnit || nameList[i] === undefined;\n         })) {\n           namePathList.push(namePath);\n         }\n       }\n       // Skip if without rule\n       if (!field.props.rules || !field.props.rules.length) {\n         return;\n       }\n       var fieldNamePath = field.getNamePath();\n       // Add field validate rule in to promise list\n       if (!provideNameList || (0, _valueUtil.containsNamePath)(namePathList, fieldNamePath)) {\n         var promise = field.validateRules((0, _objectSpread2.default)({\n           validateMessages: (0, _objectSpread2.default)((0, _objectSpread2.default)({}, _messages.defaultValidateMessages), _this.validateMessages)\n         }, options));\n         // Wrap promise with field\n         promiseList.push(promise.then(function () {\n           return {\n             name: fieldNamePath,\n             errors: [],\n             warnings: []\n           };\n         }).catch(function (ruleErrors) {\n           var _ruleErrors$forEach;\n           var mergedErrors = [];\n           var mergedWarnings = [];\n           (_ruleErrors$forEach = ruleErrors.forEach) === null || _ruleErrors$forEach === void 0 ? void 0 : _ruleErrors$forEach.call(ruleErrors, function (_ref6) {\n             var warningOnly = _ref6.rule.warningOnly,\n               errors = _ref6.errors;\n             if (warningOnly) {\n               mergedWarnings.push.apply(mergedWarnings, (0, _toConsumableArray2.default)(errors));\n             } else {\n               mergedErrors.push.apply(mergedErrors, (0, _toConsumableArray2.default)(errors));\n             }\n           });\n           if (mergedErrors.length) {\n             return Promise.reject({\n               name: fieldNamePath,\n               errors: mergedErrors,\n               warnings: mergedWarnings\n             });\n           }\n           return {\n             name: fieldNamePath,\n             errors: mergedErrors,\n             warnings: mergedWarnings\n           };\n         }));\n       }\n     });\n     var summaryPromise = (0, _asyncUtil.allPromiseFinish)(promiseList);\n     _this.lastValidatePromise = summaryPromise;\n     // Notify fields with rule that validate has finished and need update\n     summaryPromise.catch(function (results) {\n       return results;\n     }).then(function (results) {\n       var resultNamePathList = results.map(function (_ref7) {\n         var name = _ref7.name;\n         return name;\n       });\n       _this.notifyObservers(_this.store, resultNamePathList, {\n         type: 'validateFinish'\n       });\n       _this.triggerOnFieldsChange(resultNamePathList, results);\n     });\n     var returnPromise = summaryPromise.then(function () {\n       if (_this.lastValidatePromise === summaryPromise) {\n         return Promise.resolve(_this.getFieldsValue(namePathList));\n       }\n       return Promise.reject([]);\n     }).catch(function (results) {\n       var errorList = results.filter(function (result) {\n         return result && result.errors.length;\n       });\n       return Promise.reject({\n         values: _this.getFieldsValue(namePathList),\n         errorFields: errorList,\n         outOfDate: _this.lastValidatePromise !== summaryPromise\n       });\n     });\n     // Do not throw in console\n     returnPromise.catch(function (e) {\n       return e;\n     });\n     return returnPromise;\n   };\n   this.submit = function () {\n     _this.warningUnhooked();\n     _this.validateFields().then(function (values) {\n       var onFinish = _this.callbacks.onFinish;\n       if (onFinish) {\n         try {\n           onFinish(values);\n         } catch (err) {\n           // Should print error if user `onFinish` callback failed\n           console.error(err);\n         }\n       }\n     }).catch(function (e) {\n       var onFinishFailed = _this.callbacks.onFinishFailed;\n       if (onFinishFailed) {\n         onFinishFailed(e);\n       }\n     });\n   };\n   this.forceRootUpdate = forceRootUpdate;\n });\n exports.FormStore = FormStore;\n function useForm(form) {\n   var formRef = React.useRef();\n   var _React$useState = React.useState({}),\n     _React$useState2 = (0, _slicedToArray2.default)(_React$useState, 2),\n     forceUpdate = _React$useState2[1];\n   if (!formRef.current) {\n     if (form) {\n       formRef.current = form;\n     } else {\n       // Create a new FormStore if not provided\n       var forceReRender = function forceReRender() {\n         forceUpdate({});\n       };\n       var formStore = new FormStore(forceReRender);\n       formRef.current = formStore.getForm();\n     }\n   }\n   return [formRef.current];\n }\n var _default = useForm;\n exports.default = _default;\n\n// #endregion ORIGINAL CODE\n\n_cjsExports = module.exports;\n___esModule = module.exports.__esModule;\n_default0 = module.exports.default;\n_FormStore = module.exports.FormStore;\n\n}, () => ({\n  '@babel/runtime/helpers/interopRequireDefault': _req,\n  '@babel/runtime/helpers/interopRequireWildcard': _req0,\n  '@babel/runtime/helpers/slicedToArray': _req1,\n  '@babel/runtime/helpers/objectSpread2': _req2,\n  '@babel/runtime/helpers/objectWithoutProperties': _req3,\n  '@babel/runtime/helpers/toConsumableArray': _req4,\n  '@babel/runtime/helpers/createClass': _req5,\n  '@babel/runtime/helpers/classCallCheck': _req6,\n  'rc-util/lib/warning': _req7,\n  'react': _req8,\n  './FieldContext': _req9,\n  './utils/asyncUtil': _req10,\n  './utils/cloneDeep': _req11,\n  './utils/messages': _req12,\n  './utils/NameMap': _req13,\n  './utils/valueUtil': _req14,\n}));\nexport { _cjsExports as default };\nexport { __cjsMetaURL }\n"]}