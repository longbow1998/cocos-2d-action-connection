{"version":3,"sources":["file:///Users/longbow/node_modules/rc-menu/lib/hooks/useAccessibility.js"],"names":["_cjsLoader","_req","__cjsMetaURL","_req0","_req1","_req2","_req3","_req4","_req5","_req6","url","define","exports","require","module","__filename","__dirname","_interopRequireDefault","_typeof","Object","defineProperty","value","default","useAccessibility","_defineProperty2","React","_interopRequireWildcard","_KeyCode","_raf","_focus","_IdContext","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","cache","has","get","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","LEFT","RIGHT","UP","DOWN","ENTER","ESC","HOME","END","ArrowKeys","getOffset","mode","isRootLevel","isRtl","which","_inline","_horizontal","_vertical","_offsets","prev","next","children","parent","inlineTrigger","inline","horizontal","vertical","offsets","inlineSub","horizontalSub","verticalSub","type","concat","offset","sibling","findContainerUL","element","current","getAttribute","parentElement","getFocusElement","activeElement","elements","document","getFocusableElements","container","list","getFocusNodeList","filter","ele","getNextFocusElement","parentQueryContainer","focusMenuElement","arguments","length","undefined","sameLevelFocusableMenuElementList","count","focusIndex","findIndex","activeKey","id","containerRef","getKeys","getKeyPath","triggerActiveKey","triggerAccessibilityOpen","originOnKeyDown","rafRef","useRef","activeRef","cleanRaf","cancel","useEffect","e","includes","key2element","element2key","refreshElements","Set","Map","keys","forEach","querySelector","getMenuId","add","focusMenuKey","offsetObj","preventDefault","tryFocus","menuElement","focusTargetElement","link","targetKey","focus","targetElement","focusableElements","controlId","subQueryContainer","getElementById","keyPath","parentKey","parentMenuElement","_cjsExports","___esModule","_default"],"mappings":"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","sourcesContent":["import _cjsLoader from 'cce:/internal/ml/cjs-loader.mjs';\nimport { __cjsMetaURL as _req} from '@babel/runtime/helpers/interopRequireDefault';\nimport { __cjsMetaURL as _req0} from '@babel/runtime/helpers/typeof';\nimport { __cjsMetaURL as _req1} from '@babel/runtime/helpers/defineProperty';\nimport { __cjsMetaURL as _req2} from 'react';\nimport { __cjsMetaURL as _req3} from 'rc-util/lib/KeyCode';\nimport { __cjsMetaURL as _req4} from 'rc-util/lib/raf';\nimport { __cjsMetaURL as _req5} from 'rc-util/lib/Dom/focus';\nimport { __cjsMetaURL as _req6} from '../context/IdContext';\nlet _cjsExports;\nlet ___esModule;\nlet _default;\nconst __cjsMetaURL = import.meta.url;\n_cjsLoader.define(__cjsMetaURL, function (exports, require, module, __filename, __dirname) {\n// #region ORIGINAL CODE\n\n\n \"use strict\";\n\n var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n var _typeof = require(\"@babel/runtime/helpers/typeof\");\n Object.defineProperty(exports, \"__esModule\", {\n   value: true\n });\n exports.default = useAccessibility;\n var _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n var React = _interopRequireWildcard(require(\"react\"));\n var _KeyCode = _interopRequireDefault(require(\"rc-util/lib/KeyCode\"));\n var _raf = _interopRequireDefault(require(\"rc-util/lib/raf\"));\n var _focus = require(\"rc-util/lib/Dom/focus\");\n var _IdContext = require(\"../context/IdContext\");\n function _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n function _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n // destruct to reduce minify size\n var LEFT = _KeyCode.default.LEFT,\n   RIGHT = _KeyCode.default.RIGHT,\n   UP = _KeyCode.default.UP,\n   DOWN = _KeyCode.default.DOWN,\n   ENTER = _KeyCode.default.ENTER,\n   ESC = _KeyCode.default.ESC,\n   HOME = _KeyCode.default.HOME,\n   END = _KeyCode.default.END;\n var ArrowKeys = [UP, DOWN, LEFT, RIGHT];\n function getOffset(mode, isRootLevel, isRtl, which) {\n   var _inline, _horizontal, _vertical, _offsets;\n   var prev = 'prev';\n   var next = 'next';\n   var children = 'children';\n   var parent = 'parent';\n\n   // Inline enter is special that we use unique operation\n   if (mode === 'inline' && which === ENTER) {\n     return {\n       inlineTrigger: true\n     };\n   }\n   var inline = (_inline = {}, (0, _defineProperty2.default)(_inline, UP, prev), (0, _defineProperty2.default)(_inline, DOWN, next), _inline);\n   var horizontal = (_horizontal = {}, (0, _defineProperty2.default)(_horizontal, LEFT, isRtl ? next : prev), (0, _defineProperty2.default)(_horizontal, RIGHT, isRtl ? prev : next), (0, _defineProperty2.default)(_horizontal, DOWN, children), (0, _defineProperty2.default)(_horizontal, ENTER, children), _horizontal);\n   var vertical = (_vertical = {}, (0, _defineProperty2.default)(_vertical, UP, prev), (0, _defineProperty2.default)(_vertical, DOWN, next), (0, _defineProperty2.default)(_vertical, ENTER, children), (0, _defineProperty2.default)(_vertical, ESC, parent), (0, _defineProperty2.default)(_vertical, LEFT, isRtl ? children : parent), (0, _defineProperty2.default)(_vertical, RIGHT, isRtl ? parent : children), _vertical);\n   var offsets = {\n     inline: inline,\n     horizontal: horizontal,\n     vertical: vertical,\n     inlineSub: inline,\n     horizontalSub: vertical,\n     verticalSub: vertical\n   };\n   var type = (_offsets = offsets[\"\".concat(mode).concat(isRootLevel ? '' : 'Sub')]) === null || _offsets === void 0 ? void 0 : _offsets[which];\n   switch (type) {\n     case prev:\n       return {\n         offset: -1,\n         sibling: true\n       };\n     case next:\n       return {\n         offset: 1,\n         sibling: true\n       };\n     case parent:\n       return {\n         offset: -1,\n         sibling: false\n       };\n     case children:\n       return {\n         offset: 1,\n         sibling: false\n       };\n     default:\n       return null;\n   }\n }\n function findContainerUL(element) {\n   var current = element;\n   while (current) {\n     if (current.getAttribute('data-menu-list')) {\n       return current;\n     }\n     current = current.parentElement;\n   }\n\n   // Normally should not reach this line\n   /* istanbul ignore next */\n   return null;\n }\n\n /**\n  * Find focused element within element set provided\n  */\n function getFocusElement(activeElement, elements) {\n   var current = activeElement || document.activeElement;\n   while (current) {\n     if (elements.has(current)) {\n       return current;\n     }\n     current = current.parentElement;\n   }\n   return null;\n }\n\n /**\n  * Get focusable elements from the element set under provided container\n  */\n function getFocusableElements(container, elements) {\n   var list = (0, _focus.getFocusNodeList)(container, true);\n   return list.filter(function (ele) {\n     return elements.has(ele);\n   });\n }\n function getNextFocusElement(parentQueryContainer, elements, focusMenuElement) {\n   var offset = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 1;\n   // Key on the menu item will not get validate parent container\n   if (!parentQueryContainer) {\n     return null;\n   }\n\n   // List current level menu item elements\n   var sameLevelFocusableMenuElementList = getFocusableElements(parentQueryContainer, elements);\n\n   // Find next focus index\n   var count = sameLevelFocusableMenuElementList.length;\n   var focusIndex = sameLevelFocusableMenuElementList.findIndex(function (ele) {\n     return focusMenuElement === ele;\n   });\n   if (offset < 0) {\n     if (focusIndex === -1) {\n       focusIndex = count - 1;\n     } else {\n       focusIndex -= 1;\n     }\n   } else if (offset > 0) {\n     focusIndex += 1;\n   }\n   focusIndex = (focusIndex + count) % count;\n\n   // Focus menu item\n   return sameLevelFocusableMenuElementList[focusIndex];\n }\n function useAccessibility(mode, activeKey, isRtl, id, containerRef, getKeys, getKeyPath, triggerActiveKey, triggerAccessibilityOpen, originOnKeyDown) {\n   var rafRef = React.useRef();\n   var activeRef = React.useRef();\n   activeRef.current = activeKey;\n   var cleanRaf = function cleanRaf() {\n     _raf.default.cancel(rafRef.current);\n   };\n   React.useEffect(function () {\n     return function () {\n       cleanRaf();\n     };\n   }, []);\n   return function (e) {\n     var which = e.which;\n     if ([].concat(ArrowKeys, [ENTER, ESC, HOME, END]).includes(which)) {\n       // Convert key to elements\n       var elements;\n       var key2element;\n       var element2key;\n\n       // >>> Wrap as function since we use raf for some case\n       var refreshElements = function refreshElements() {\n         elements = new Set();\n         key2element = new Map();\n         element2key = new Map();\n         var keys = getKeys();\n         keys.forEach(function (key) {\n           var element = document.querySelector(\"[data-menu-id='\".concat((0, _IdContext.getMenuId)(id, key), \"']\"));\n           if (element) {\n             elements.add(element);\n             element2key.set(element, key);\n             key2element.set(key, element);\n           }\n         });\n         return elements;\n       };\n       refreshElements();\n\n       // First we should find current focused MenuItem/SubMenu element\n       var activeElement = key2element.get(activeKey);\n       var focusMenuElement = getFocusElement(activeElement, elements);\n       var focusMenuKey = element2key.get(focusMenuElement);\n       var offsetObj = getOffset(mode, getKeyPath(focusMenuKey, true).length === 1, isRtl, which);\n\n       // Some mode do not have fully arrow operation like inline\n       if (!offsetObj && which !== HOME && which !== END) {\n         return;\n       }\n\n       // Arrow prevent default to avoid page scroll\n       if (ArrowKeys.includes(which) || [HOME, END].includes(which)) {\n         e.preventDefault();\n       }\n       var tryFocus = function tryFocus(menuElement) {\n         if (menuElement) {\n           var focusTargetElement = menuElement;\n\n           // Focus to link instead of menu item if possible\n           var link = menuElement.querySelector('a');\n           if (link !== null && link !== void 0 && link.getAttribute('href')) {\n             focusTargetElement = link;\n           }\n           var targetKey = element2key.get(menuElement);\n           triggerActiveKey(targetKey);\n\n           /**\n            * Do not `useEffect` here since `tryFocus` may trigger async\n            * which makes React sync update the `activeKey`\n            * that force render before `useRef` set the next activeKey\n            */\n           cleanRaf();\n           rafRef.current = (0, _raf.default)(function () {\n             if (activeRef.current === targetKey) {\n               focusTargetElement.focus();\n             }\n           });\n         }\n       };\n       if ([HOME, END].includes(which) || offsetObj.sibling || !focusMenuElement) {\n         // ========================== Sibling ==========================\n         // Find walkable focus menu element container\n         var parentQueryContainer;\n         if (!focusMenuElement || mode === 'inline') {\n           parentQueryContainer = containerRef.current;\n         } else {\n           parentQueryContainer = findContainerUL(focusMenuElement);\n         }\n\n         // Get next focus element\n         var targetElement;\n         var focusableElements = getFocusableElements(parentQueryContainer, elements);\n         if (which === HOME) {\n           targetElement = focusableElements[0];\n         } else if (which === END) {\n           targetElement = focusableElements[focusableElements.length - 1];\n         } else {\n           targetElement = getNextFocusElement(parentQueryContainer, elements, focusMenuElement, offsetObj.offset);\n         }\n         // Focus menu item\n         tryFocus(targetElement);\n\n         // ======================= InlineTrigger =======================\n       } else if (offsetObj.inlineTrigger) {\n         // Inline trigger no need switch to sub menu item\n         triggerAccessibilityOpen(focusMenuKey);\n         // =========================== Level ===========================\n       } else if (offsetObj.offset > 0) {\n         triggerAccessibilityOpen(focusMenuKey, true);\n         cleanRaf();\n         rafRef.current = (0, _raf.default)(function () {\n           // Async should resync elements\n           refreshElements();\n           var controlId = focusMenuElement.getAttribute('aria-controls');\n           var subQueryContainer = document.getElementById(controlId);\n\n           // Get sub focusable menu item\n           var targetElement = getNextFocusElement(subQueryContainer, elements);\n\n           // Focus menu item\n           tryFocus(targetElement);\n         }, 5);\n       } else if (offsetObj.offset < 0) {\n         var keyPath = getKeyPath(focusMenuKey, true);\n         var parentKey = keyPath[keyPath.length - 2];\n         var parentMenuElement = key2element.get(parentKey);\n\n         // Focus menu item\n         triggerAccessibilityOpen(parentKey, false);\n         tryFocus(parentMenuElement);\n       }\n     }\n\n     // Pass origin key down event\n     originOnKeyDown === null || originOnKeyDown === void 0 ? void 0 : originOnKeyDown(e);\n   };\n }\n\n// #endregion ORIGINAL CODE\n\n_cjsExports = module.exports;\n___esModule = module.exports.__esModule;\n_default = module.exports.default;\n\n}, () => ({\n  '@babel/runtime/helpers/interopRequireDefault': _req,\n  '@babel/runtime/helpers/typeof': _req0,\n  '@babel/runtime/helpers/defineProperty': _req1,\n  'react': _req2,\n  'rc-util/lib/KeyCode': _req3,\n  'rc-util/lib/raf': _req4,\n  'rc-util/lib/Dom/focus': _req5,\n  '../context/IdContext': _req6,\n}));\nexport { _cjsExports as default };\nexport { __cjsMetaURL }\n"]}