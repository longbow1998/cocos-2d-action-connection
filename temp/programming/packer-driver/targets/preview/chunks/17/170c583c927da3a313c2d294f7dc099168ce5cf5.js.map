{"version":3,"sources":["file:///Users/longbow/node_modules/antd/lib/_util/ActionButton.js"],"names":["_cjsLoader","_req","__cjsMetaURL","_req0","_req1","_req2","_req3","_req4","_req5","_req6","url","define","exports","require","module","__filename","__dirname","_interopRequireWildcard","_interopRequireDefault","Object","defineProperty","value","_extends2","_slicedToArray2","_useState3","React","_button","_button2","isThenable","thing","then","ActionButton","props","clickedRef","useRef","ref","_useState","_useState2","loading","setLoading","close","onInternalClose","apply","arguments","useEffect","timeoutId","autoFocus","setTimeout","_a","current","focus","clearTimeout","handlePromiseOnOk","returnValueOfOnOk","e","console","error","onClick","actionFn","emitEvent","quitOnNullishReturnValue","length","type","children","prefixCls","buttonProps","createElement","convertLegacyProps","_default","_cjsExports","___esModule","__esModule","_default0","default"],"mappings":"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","sourcesContent":["import _cjsLoader from 'cce:/internal/ml/cjs-loader.mjs';\nimport { __cjsMetaURL as _req} from '@babel/runtime/helpers/interopRequireWildcard';\nimport { __cjsMetaURL as _req0} from '@babel/runtime/helpers/interopRequireDefault';\nimport { __cjsMetaURL as _req1} from '@babel/runtime/helpers/extends';\nimport { __cjsMetaURL as _req2} from '@babel/runtime/helpers/slicedToArray';\nimport { __cjsMetaURL as _req3} from 'rc-util/lib/hooks/useState';\nimport { __cjsMetaURL as _req4} from 'react';\nimport { __cjsMetaURL as _req5} from '../button';\nimport { __cjsMetaURL as _req6} from '../button/button';\nlet _cjsExports;\nlet ___esModule;\nlet _default0;\nconst __cjsMetaURL = import.meta.url;\n_cjsLoader.define(__cjsMetaURL, function (exports, require, module, __filename, __dirname) {\n// #region ORIGINAL CODE\n\n\n \"use strict\";\n\n var _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\")[\"default\"];\n var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\")[\"default\"];\n Object.defineProperty(exports, \"__esModule\", {\n   value: true\n });\n exports[\"default\"] = void 0;\n var _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n var _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n var _useState3 = _interopRequireDefault(require(\"rc-util/lib/hooks/useState\"));\n var React = _interopRequireWildcard(require(\"react\"));\n var _button = _interopRequireDefault(require(\"../button\"));\n var _button2 = require(\"../button/button\");\n function isThenable(thing) {\n   return !!(thing && !!thing.then);\n }\n var ActionButton = function ActionButton(props) {\n   var clickedRef = React.useRef(false);\n   var ref = React.useRef(null);\n   var _useState = (0, _useState3[\"default\"])(false),\n     _useState2 = (0, _slicedToArray2[\"default\"])(_useState, 2),\n     loading = _useState2[0],\n     setLoading = _useState2[1];\n   var close = props.close;\n   var onInternalClose = function onInternalClose() {\n     close === null || close === void 0 ? void 0 : close.apply(void 0, arguments);\n   };\n   React.useEffect(function () {\n     var timeoutId = null;\n     if (props.autoFocus) {\n       timeoutId = setTimeout(function () {\n         var _a;\n         (_a = ref.current) === null || _a === void 0 ? void 0 : _a.focus();\n       });\n     }\n     return function () {\n       if (timeoutId) {\n         clearTimeout(timeoutId);\n       }\n     };\n   }, []);\n   var handlePromiseOnOk = function handlePromiseOnOk(returnValueOfOnOk) {\n     if (!isThenable(returnValueOfOnOk)) {\n       return;\n     }\n     setLoading(true);\n     returnValueOfOnOk.then(function () {\n       setLoading(false, true);\n       onInternalClose.apply(void 0, arguments);\n       clickedRef.current = false;\n     }, function (e) {\n       // Emit error when catch promise reject\n       // eslint-disable-next-line no-console\n       console.error(e);\n       // See: https://github.com/ant-design/ant-design/issues/6183\n       setLoading(false, true);\n       clickedRef.current = false;\n     });\n   };\n   var onClick = function onClick(e) {\n     var actionFn = props.actionFn;\n     if (clickedRef.current) {\n       return;\n     }\n     clickedRef.current = true;\n     if (!actionFn) {\n       onInternalClose();\n       return;\n     }\n     var returnValueOfOnOk;\n     if (props.emitEvent) {\n       returnValueOfOnOk = actionFn(e);\n       if (props.quitOnNullishReturnValue && !isThenable(returnValueOfOnOk)) {\n         clickedRef.current = false;\n         onInternalClose(e);\n         return;\n       }\n     } else if (actionFn.length) {\n       returnValueOfOnOk = actionFn(close);\n       // https://github.com/ant-design/ant-design/issues/23358\n       clickedRef.current = false;\n     } else {\n       returnValueOfOnOk = actionFn();\n       if (!returnValueOfOnOk) {\n         onInternalClose();\n         return;\n       }\n     }\n     handlePromiseOnOk(returnValueOfOnOk);\n   };\n   var type = props.type,\n     children = props.children,\n     prefixCls = props.prefixCls,\n     buttonProps = props.buttonProps;\n   return /*#__PURE__*/React.createElement(_button[\"default\"], (0, _extends2[\"default\"])({}, (0, _button2.convertLegacyProps)(type), {\n     onClick: onClick,\n     loading: loading,\n     prefixCls: prefixCls\n   }, buttonProps, {\n     ref: ref\n   }), children);\n };\n var _default = ActionButton;\n exports[\"default\"] = _default;\n\n// #endregion ORIGINAL CODE\n\n_cjsExports = module.exports;\n___esModule = module.exports.__esModule;\n_default0 = module.exports.default;\n\n}, () => ({\n  '@babel/runtime/helpers/interopRequireWildcard': _req,\n  '@babel/runtime/helpers/interopRequireDefault': _req0,\n  '@babel/runtime/helpers/extends': _req1,\n  '@babel/runtime/helpers/slicedToArray': _req2,\n  'rc-util/lib/hooks/useState': _req3,\n  'react': _req4,\n  '../button': _req5,\n  '../button/button': _req6,\n}));\nexport { _cjsExports as default };\nexport { __cjsMetaURL }\n"]}