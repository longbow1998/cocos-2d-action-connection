{"version":3,"sources":["file:///Users/longbow/node_modules/rc-util/lib/Portal.js"],"names":["_cjsLoader","_req","__cjsMetaURL","_req0","_req1","_req2","url","define","exports","require","module","__filename","__dirname","_interopRequireDefault","default","Object","defineProperty","value","_react","_reactDom","_canUseDom","Portal","forwardRef","props","ref","didUpdate","getContainer","children","parentRef","useRef","containerRef","useImperativeHandle","initRef","current","parentNode","useEffect","appendChild","_containerRef$current","_containerRef$current2","removeChild","createPortal","_default","_cjsExports","___esModule","__esModule","_default0"],"mappings":"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","sourcesContent":["import _cjsLoader from 'cce:/internal/ml/cjs-loader.mjs';\nimport { __cjsMetaURL as _req} from '@babel/runtime/helpers/interopRequireDefault';\nimport { __cjsMetaURL as _req0} from 'react';\nimport { __cjsMetaURL as _req1} from 'react-dom';\nimport { __cjsMetaURL as _req2} from './Dom/canUseDom';\nlet _cjsExports;\nlet ___esModule;\nlet _default0;\nconst __cjsMetaURL = import.meta.url;\n_cjsLoader.define(__cjsMetaURL, function (exports, require, module, __filename, __dirname) {\n// #region ORIGINAL CODE\n\n\n \"use strict\";\n\n var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\").default;\n Object.defineProperty(exports, \"__esModule\", {\n   value: true\n });\n exports.default = void 0;\n var _react = require(\"react\");\n var _reactDom = _interopRequireDefault(require(\"react-dom\"));\n var _canUseDom = _interopRequireDefault(require(\"./Dom/canUseDom\"));\n var Portal = /*#__PURE__*/(0, _react.forwardRef)(function (props, ref) {\n   var didUpdate = props.didUpdate,\n     getContainer = props.getContainer,\n     children = props.children;\n   var parentRef = (0, _react.useRef)();\n   var containerRef = (0, _react.useRef)();\n\n   // Ref return nothing, only for wrapper check exist\n   (0, _react.useImperativeHandle)(ref, function () {\n     return {};\n   });\n\n   // Create container in client side with sync to avoid useEffect not get ref\n   var initRef = (0, _react.useRef)(false);\n   if (!initRef.current && (0, _canUseDom.default)()) {\n     containerRef.current = getContainer();\n     parentRef.current = containerRef.current.parentNode;\n     initRef.current = true;\n   }\n\n   // [Legacy] Used by `rc-trigger`\n   (0, _react.useEffect)(function () {\n     didUpdate === null || didUpdate === void 0 ? void 0 : didUpdate(props);\n   });\n   (0, _react.useEffect)(function () {\n     // Restore container to original place\n     // React 18 StrictMode will unmount first and mount back for effect test:\n     // https://reactjs.org/blog/2022/03/29/react-v18.html#new-strict-mode-behaviors\n     if (containerRef.current.parentNode === null && parentRef.current !== null) {\n       parentRef.current.appendChild(containerRef.current);\n     }\n     return function () {\n       var _containerRef$current, _containerRef$current2;\n       // [Legacy] This should not be handle by Portal but parent PortalWrapper instead.\n       // Since some component use `Portal` directly, we have to keep the logic here.\n       (_containerRef$current = containerRef.current) === null || _containerRef$current === void 0 ? void 0 : (_containerRef$current2 = _containerRef$current.parentNode) === null || _containerRef$current2 === void 0 ? void 0 : _containerRef$current2.removeChild(containerRef.current);\n     };\n   }, []);\n   return containerRef.current ? /*#__PURE__*/_reactDom.default.createPortal(children, containerRef.current) : null;\n });\n var _default = Portal;\n exports.default = _default;\n\n// #endregion ORIGINAL CODE\n\n_cjsExports = module.exports;\n___esModule = module.exports.__esModule;\n_default0 = module.exports.default;\n\n}, () => ({\n  '@babel/runtime/helpers/interopRequireDefault': _req,\n  'react': _req0,\n  'react-dom': _req1,\n  './Dom/canUseDom': _req2,\n}));\nexport { _cjsExports as default };\nexport { __cjsMetaURL }\n"]}