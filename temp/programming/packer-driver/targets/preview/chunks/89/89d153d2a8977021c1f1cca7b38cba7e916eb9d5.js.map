{"version":3,"sources":["file:///Users/longbow/node_modules/rc-trigger/lib/Popup/PopupInner.js"],"names":["_cjsLoader","_req","__cjsMetaURL","_req0","_req1","_req2","_req3","_req4","_req5","_req6","_req7","_req8","_req9","_req10","_req11","url","define","exports","require","module","__filename","__dirname","_interopRequireWildcard","default","_interopRequireDefault","Object","defineProperty","value","_extends2","_objectSpread2","_slicedToArray2","React","_rcAlign","_useLayoutEffect","_rcMotion","_classnames","_useVisibleStatus3","_legacyUtil","_useStretchStyle3","PopupInner","forwardRef","props","ref","visible","prefixCls","className","style","children","zIndex","stretch","destroyPopupOnHide","forceRender","align","point","getRootDomNode","getClassNameFromAlign","onAlign","onMouseEnter","onMouseLeave","onMouseDown","onTouchStart","onClick","alignRef","useRef","elementRef","_useState","useState","_useState2","alignedClassName","setAlignedClassName","_useStretchStyle","_useStretchStyle2","stretchStyle","measureStretchStyle","doMeasure","_useVisibleStatus","_useVisibleStatus2","status","goNextStatus","_useState3","_useState4","alignTimes","setAlignTimes","prepareResolveRef","getAlignTarget","forceAlign","_alignRef$current","current","onInternalAlign","popupDomNode","matchAlign","nextAlignedClassName","val","_prepareResolveRef$cu","call","motion","getMotion","forEach","eventName","originHandler","element","event","onShowPrepare","Promise","resolve","useEffect","motionName","useImperativeHandle","getElement","mergedStyle","opacity","undefined","pointerEvents","alignDisabled","points","childNode","Children","count","createElement","concat","leavedClassName","onAppearPrepare","onEnterPrepare","removeOnLeave","_ref","motionRef","motionClassName","motionStyle","mergedClassName","target","key","monitorWindowResize","disabled","onMouseDownCapture","onTouchStartCapture","displayName","_default","_cjsExports","___esModule","__esModule","_default0"],"mappings":"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","sourcesContent":["import _cjsLoader from 'cce:/internal/ml/cjs-loader.mjs';\nimport { __cjsMetaURL as _req} from '@babel/runtime/helpers/interopRequireWildcard';\nimport { __cjsMetaURL as _req0} from '@babel/runtime/helpers/interopRequireDefault';\nimport { __cjsMetaURL as _req1} from '@babel/runtime/helpers/extends';\nimport { __cjsMetaURL as _req2} from '@babel/runtime/helpers/objectSpread2';\nimport { __cjsMetaURL as _req3} from '@babel/runtime/helpers/slicedToArray';\nimport { __cjsMetaURL as _req4} from 'react';\nimport { __cjsMetaURL as _req5} from 'rc-align';\nimport { __cjsMetaURL as _req6} from 'rc-util/lib/hooks/useLayoutEffect';\nimport { __cjsMetaURL as _req7} from 'rc-motion';\nimport { __cjsMetaURL as _req8} from 'classnames';\nimport { __cjsMetaURL as _req9} from './useVisibleStatus';\nimport { __cjsMetaURL as _req10} from '../utils/legacyUtil';\nimport { __cjsMetaURL as _req11} from './useStretchStyle';\nlet _cjsExports;\nlet ___esModule;\nlet _default0;\nconst __cjsMetaURL = import.meta.url;\n_cjsLoader.define(__cjsMetaURL, function (exports, require, module, __filename, __dirname) {\n// #region ORIGINAL CODE\n\n\n \"use strict\";\n\n var _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\").default;\n\n var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\").default;\n\n Object.defineProperty(exports, \"__esModule\", {\n   value: true\n });\n exports.default = void 0;\n\n var _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\n var _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread2\"));\n\n var _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\n var React = _interopRequireWildcard(require(\"react\"));\n\n var _rcAlign = _interopRequireDefault(require(\"rc-align\"));\n\n var _useLayoutEffect = _interopRequireDefault(require(\"rc-util/lib/hooks/useLayoutEffect\"));\n\n var _rcMotion = _interopRequireDefault(require(\"rc-motion\"));\n\n var _classnames = _interopRequireDefault(require(\"classnames\"));\n\n var _useVisibleStatus3 = _interopRequireDefault(require(\"./useVisibleStatus\"));\n\n var _legacyUtil = require(\"../utils/legacyUtil\");\n\n var _useStretchStyle3 = _interopRequireDefault(require(\"./useStretchStyle\"));\n\n var PopupInner = /*#__PURE__*/React.forwardRef(function (props, ref) {\n   var visible = props.visible,\n       prefixCls = props.prefixCls,\n       className = props.className,\n       style = props.style,\n       children = props.children,\n       zIndex = props.zIndex,\n       stretch = props.stretch,\n       destroyPopupOnHide = props.destroyPopupOnHide,\n       forceRender = props.forceRender,\n       align = props.align,\n       point = props.point,\n       getRootDomNode = props.getRootDomNode,\n       getClassNameFromAlign = props.getClassNameFromAlign,\n       onAlign = props.onAlign,\n       onMouseEnter = props.onMouseEnter,\n       onMouseLeave = props.onMouseLeave,\n       onMouseDown = props.onMouseDown,\n       onTouchStart = props.onTouchStart,\n       onClick = props.onClick;\n   var alignRef = (0, React.useRef)();\n   var elementRef = (0, React.useRef)();\n\n   var _useState = (0, React.useState)(),\n       _useState2 = (0, _slicedToArray2.default)(_useState, 2),\n       alignedClassName = _useState2[0],\n       setAlignedClassName = _useState2[1]; // ======================= Measure ========================\n\n\n   var _useStretchStyle = (0, _useStretchStyle3.default)(stretch),\n       _useStretchStyle2 = (0, _slicedToArray2.default)(_useStretchStyle, 2),\n       stretchStyle = _useStretchStyle2[0],\n       measureStretchStyle = _useStretchStyle2[1];\n\n   function doMeasure() {\n     if (stretch) {\n       measureStretchStyle(getRootDomNode());\n     }\n   } // ======================== Status ========================\n\n\n   var _useVisibleStatus = (0, _useVisibleStatus3.default)(visible, doMeasure),\n       _useVisibleStatus2 = (0, _slicedToArray2.default)(_useVisibleStatus, 2),\n       status = _useVisibleStatus2[0],\n       goNextStatus = _useVisibleStatus2[1]; // ======================== Aligns ========================\n\n   /**\n    * `alignedClassName` may modify `source` size,\n    * which means one time align may not move to the correct position at once.\n    *\n    * We will reset `alignTimes` for each status switch to `alignPre`\n    * and let `rc-align` to align for multiple times to ensure get final stable place.\n    * Currently we mark `alignTimes < 2` repeat align, it will increase if user report for align issue.\n    * \n    * Update:\n    * In React 18. `rc-align` effect of align may faster than ref called trigger `forceAlign`.\n    * We adjust this to `alignTimes < 2`.\n    * We need refactor `rc-align` to support mark of `forceAlign` call if this still happen.\n    */\n\n\n   var _useState3 = (0, React.useState)(0),\n       _useState4 = (0, _slicedToArray2.default)(_useState3, 2),\n       alignTimes = _useState4[0],\n       setAlignTimes = _useState4[1];\n\n   var prepareResolveRef = (0, React.useRef)();\n   (0, _useLayoutEffect.default)(function () {\n     if (status === 'alignPre') {\n       setAlignTimes(0);\n     }\n   }, [status]); // `target` on `rc-align` can accept as a function to get the bind element or a point.\n   // ref: https://www.npmjs.com/package/rc-align\n\n   function getAlignTarget() {\n     if (point) {\n       return point;\n     }\n\n     return getRootDomNode;\n   }\n\n   function forceAlign() {\n     var _alignRef$current;\n\n     (_alignRef$current = alignRef.current) === null || _alignRef$current === void 0 ? void 0 : _alignRef$current.forceAlign();\n   }\n\n   function onInternalAlign(popupDomNode, matchAlign) {\n     var nextAlignedClassName = getClassNameFromAlign(matchAlign);\n\n     if (alignedClassName !== nextAlignedClassName) {\n       setAlignedClassName(nextAlignedClassName);\n     } // We will retry multi times to make sure that the element has been align in the right position.\n\n\n     setAlignTimes(function (val) {\n       return val + 1;\n     });\n\n     if (status === 'align') {\n       onAlign === null || onAlign === void 0 ? void 0 : onAlign(popupDomNode, matchAlign);\n     }\n   } // Delay to go to next status\n\n\n   (0, _useLayoutEffect.default)(function () {\n     if (status === 'align') {\n       // Repeat until not more align needed\n       if (alignTimes < 3) {\n         forceAlign();\n       } else {\n         goNextStatus(function () {\n           var _prepareResolveRef$cu;\n\n           (_prepareResolveRef$cu = prepareResolveRef.current) === null || _prepareResolveRef$cu === void 0 ? void 0 : _prepareResolveRef$cu.call(prepareResolveRef);\n         });\n       }\n     }\n   }, [alignTimes]); // ======================== Motion ========================\n\n   var motion = (0, _objectSpread2.default)({}, (0, _legacyUtil.getMotion)(props));\n   ['onAppearEnd', 'onEnterEnd', 'onLeaveEnd'].forEach(function (eventName) {\n     var originHandler = motion[eventName];\n\n     motion[eventName] = function (element, event) {\n       goNextStatus();\n       return originHandler === null || originHandler === void 0 ? void 0 : originHandler(element, event);\n     };\n   });\n\n   function onShowPrepare() {\n     return new Promise(function (resolve) {\n       prepareResolveRef.current = resolve;\n     });\n   } // Go to stable directly when motion not provided\n\n\n   React.useEffect(function () {\n     if (!motion.motionName && status === 'motion') {\n       goNextStatus();\n     }\n   }, [motion.motionName, status]); // ========================= Refs =========================\n\n   React.useImperativeHandle(ref, function () {\n     return {\n       forceAlign: forceAlign,\n       getElement: function getElement() {\n         return elementRef.current;\n       }\n     };\n   }); // ======================== Render ========================\n\n   var mergedStyle = (0, _objectSpread2.default)((0, _objectSpread2.default)({}, stretchStyle), {}, {\n     zIndex: zIndex,\n     opacity: status === 'motion' || status === 'stable' || !visible ? undefined : 0,\n     // Cannot interact with disappearing elements\n     // https://github.com/ant-design/ant-design/issues/35051#issuecomment-1101340714\n     pointerEvents: !visible && status !== 'stable' ? 'none' : undefined\n   }, style); // Align status\n\n   var alignDisabled = true;\n\n   if (align !== null && align !== void 0 && align.points && (status === 'align' || status === 'stable')) {\n     alignDisabled = false;\n   }\n\n   var childNode = children; // Wrapper when multiple children\n\n   if (React.Children.count(children) > 1) {\n     childNode = /*#__PURE__*/React.createElement(\"div\", {\n       className: \"\".concat(prefixCls, \"-content\")\n     }, children);\n   }\n\n   return /*#__PURE__*/React.createElement(_rcMotion.default, (0, _extends2.default)({\n     visible: visible,\n     ref: elementRef,\n     leavedClassName: \"\".concat(prefixCls, \"-hidden\")\n   }, motion, {\n     onAppearPrepare: onShowPrepare,\n     onEnterPrepare: onShowPrepare,\n     removeOnLeave: destroyPopupOnHide,\n     forceRender: forceRender\n   }), function (_ref, motionRef) {\n     var motionClassName = _ref.className,\n         motionStyle = _ref.style;\n     var mergedClassName = (0, _classnames.default)(prefixCls, className, alignedClassName, motionClassName);\n     return /*#__PURE__*/React.createElement(_rcAlign.default, {\n       target: getAlignTarget(),\n       key: \"popup\",\n       ref: alignRef,\n       monitorWindowResize: true,\n       disabled: alignDisabled,\n       align: align,\n       onAlign: onInternalAlign\n     }, /*#__PURE__*/React.createElement(\"div\", {\n       ref: motionRef,\n       className: mergedClassName,\n       onMouseEnter: onMouseEnter,\n       onMouseLeave: onMouseLeave,\n       onMouseDownCapture: onMouseDown,\n       onTouchStartCapture: onTouchStart,\n       onClick: onClick,\n       style: (0, _objectSpread2.default)((0, _objectSpread2.default)({}, motionStyle), mergedStyle)\n     }, childNode));\n   });\n });\n PopupInner.displayName = 'PopupInner';\n var _default = PopupInner;\n exports.default = _default;\n\n// #endregion ORIGINAL CODE\n\n_cjsExports = module.exports;\n___esModule = module.exports.__esModule;\n_default0 = module.exports.default;\n\n}, () => ({\n  '@babel/runtime/helpers/interopRequireWildcard': _req,\n  '@babel/runtime/helpers/interopRequireDefault': _req0,\n  '@babel/runtime/helpers/extends': _req1,\n  '@babel/runtime/helpers/objectSpread2': _req2,\n  '@babel/runtime/helpers/slicedToArray': _req3,\n  'react': _req4,\n  'rc-align': _req5,\n  'rc-util/lib/hooks/useLayoutEffect': _req6,\n  'rc-motion': _req7,\n  'classnames': _req8,\n  './useVisibleStatus': _req9,\n  '../utils/legacyUtil': _req10,\n  './useStretchStyle': _req11,\n}));\nexport { _cjsExports as default };\nexport { __cjsMetaURL }\n"]}