{"version":3,"sources":["file:///Users/longbow/node_modules/antd/lib/affix/utils.js"],"names":["_cjsLoader","_req","__cjsMetaURL","_req0","url","define","exports","require","module","__filename","__dirname","_interopRequireDefault","Object","defineProperty","value","addObserveTarget","getFixedBottom","getFixedTop","getObserverEntities","getTargetRect","removeObserveTarget","_addEventListener","target","window","getBoundingClientRect","top","bottom","innerHeight","placeholderReact","targetRect","offsetTop","undefined","offsetBottom","targetBottomOffset","TRIGGER_EVENTS","observerEntities","affix","entity","find","item","affixList","push","eventHandlers","forEach","eventName","targetAffix","lazyUpdatePosition","observerEntity","oriObserverEntity","hasAffix","some","filter","length","handler","remove","_cjsExports","___esModule","__esModule","_addObserveTarget","_getFixedBottom","_getFixedTop","_getObserverEntities","_getTargetRect","_removeObserveTarget"],"mappings":"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","sourcesContent":["import _cjsLoader from 'cce:/internal/ml/cjs-loader.mjs';\nimport { __cjsMetaURL as _req} from '@babel/runtime/helpers/interopRequireDefault';\nimport { __cjsMetaURL as _req0} from 'rc-util/lib/Dom/addEventListener';\nlet _cjsExports;\nlet ___esModule;\nlet _addObserveTarget;\nlet _getFixedBottom;\nlet _getFixedTop;\nlet _getObserverEntities;\nlet _getTargetRect;\nlet _removeObserveTarget;\nconst __cjsMetaURL = import.meta.url;\n_cjsLoader.define(__cjsMetaURL, function (exports, require, module, __filename, __dirname) {\n// #region ORIGINAL CODE\n\n\n \"use strict\";\n\n var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\")[\"default\"];\n Object.defineProperty(exports, \"__esModule\", {\n   value: true\n });\n exports.addObserveTarget = addObserveTarget;\n exports.getFixedBottom = getFixedBottom;\n exports.getFixedTop = getFixedTop;\n exports.getObserverEntities = getObserverEntities;\n exports.getTargetRect = getTargetRect;\n exports.removeObserveTarget = removeObserveTarget;\n var _addEventListener = _interopRequireDefault(require(\"rc-util/lib/Dom/addEventListener\"));\n function getTargetRect(target) {\n   return target !== window ? target.getBoundingClientRect() : {\n     top: 0,\n     bottom: window.innerHeight\n   };\n }\n function getFixedTop(placeholderReact, targetRect, offsetTop) {\n   if (offsetTop !== undefined && targetRect.top > placeholderReact.top - offsetTop) {\n     return offsetTop + targetRect.top;\n   }\n   return undefined;\n }\n function getFixedBottom(placeholderReact, targetRect, offsetBottom) {\n   if (offsetBottom !== undefined && targetRect.bottom < placeholderReact.bottom + offsetBottom) {\n     var targetBottomOffset = window.innerHeight - targetRect.bottom;\n     return offsetBottom + targetBottomOffset;\n   }\n   return undefined;\n }\n // ======================== Observer ========================\n var TRIGGER_EVENTS = ['resize', 'scroll', 'touchstart', 'touchmove', 'touchend', 'pageshow', 'load'];\n var observerEntities = [];\n function getObserverEntities() {\n   // Only used in test env. Can be removed if refactor.\n   return observerEntities;\n }\n function addObserveTarget(target, affix) {\n   if (!target) {\n     return;\n   }\n   var entity = observerEntities.find(function (item) {\n     return item.target === target;\n   });\n   if (entity) {\n     entity.affixList.push(affix);\n   } else {\n     entity = {\n       target: target,\n       affixList: [affix],\n       eventHandlers: {}\n     };\n     observerEntities.push(entity);\n     // Add listener\n     TRIGGER_EVENTS.forEach(function (eventName) {\n       entity.eventHandlers[eventName] = (0, _addEventListener[\"default\"])(target, eventName, function () {\n         entity.affixList.forEach(function (targetAffix) {\n           targetAffix.lazyUpdatePosition();\n         });\n       });\n     });\n   }\n }\n function removeObserveTarget(affix) {\n   var observerEntity = observerEntities.find(function (oriObserverEntity) {\n     var hasAffix = oriObserverEntity.affixList.some(function (item) {\n       return item === affix;\n     });\n     if (hasAffix) {\n       oriObserverEntity.affixList = oriObserverEntity.affixList.filter(function (item) {\n         return item !== affix;\n       });\n     }\n     return hasAffix;\n   });\n   if (observerEntity && observerEntity.affixList.length === 0) {\n     observerEntities = observerEntities.filter(function (item) {\n       return item !== observerEntity;\n     });\n     // Remove listener\n     TRIGGER_EVENTS.forEach(function (eventName) {\n       var handler = observerEntity.eventHandlers[eventName];\n       if (handler && handler.remove) {\n         handler.remove();\n       }\n     });\n   }\n }\n\n// #endregion ORIGINAL CODE\n\n_cjsExports = module.exports;\n___esModule = module.exports.__esModule;\n_addObserveTarget = module.exports.addObserveTarget;\n_getFixedBottom = module.exports.getFixedBottom;\n_getFixedTop = module.exports.getFixedTop;\n_getObserverEntities = module.exports.getObserverEntities;\n_getTargetRect = module.exports.getTargetRect;\n_removeObserveTarget = module.exports.removeObserveTarget;\n\n}, () => ({\n  '@babel/runtime/helpers/interopRequireDefault': _req,\n  'rc-util/lib/Dom/addEventListener': _req0,\n}));\nexport { _cjsExports as default };\nexport { __cjsMetaURL }\n"]}